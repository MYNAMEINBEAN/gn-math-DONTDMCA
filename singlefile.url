[InternetShortcut]
URL=data:text/html;base64,PCFET0NUWVBFIGh0bWw+DQo8aHRtbCBsYW5nPSJlbiI+DQogICAgPGhlYWQ+DQogICAgICAgIDxiYXNlIGhyZWY9Imh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC9nbi1tYXRoL2duLW1hdGgtRE9OVERNQ0FAbWFpbi8iPg0KICAgIDxsaW5rIHJlbD0iaWNvbiIgdHlwZT0iaW1hZ2UvcG5nIiBocmVmPSJmYXZpY29uLnBuZyI+DQogICAgPGxpbmsgcmVsPSJpY29uIiB0eXBlPSJpbWFnZS9wbmciIHNpemVzPSIzMngzMiIgaHJlZj0iZmF2aWNvbi5wbmciPg0KICAgIDxsaW5rIHJlbD0iYXBwbGUtdG91Y2gtaWNvbiIgaHJlZj0iZmF2aWNvbi5wbmciPg0KICAgIDxzY3JpcHQ+DQogICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdiZWZvcmV1bmxvYWQnLCBmdW5jdGlvbiAoZXZlbnQpIHsNCiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7DQogICAgICAgICAgICBldmVudC5yZXR1cm5WYWx1ZSA9ICcnOw0KICAgICAgICAgICAgcmV0dXJuICdBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gbGVhdmU/IEFueSB1bnNhdmVkIGNoYW5nZXMgd2lsbCBiZSBsb3N0Lic7DQogICAgICAgIH0pOw0KICAgIDwvc2NyaXB0Pg0KICAgIDxzY3JpcHQgYXN5bmM9IiIgc3JjPSJodHRwczovL3d3dy5nb29nbGV0YWdtYW5hZ2VyLmNvbS9ndGFnL2pzP2lkPUctV1g1VlM1NFpEVyI+PC9zY3JpcHQ+DQogICAgPHNjcmlwdD4NCiAgICAgICAgd2luZG93LmRhdGFMYXllciA9IHdpbmRvdy5kYXRhTGF5ZXIgfHwgW107DQoNCiAgICAgICAgZnVuY3Rpb24gZ3RhZygpIHsNCiAgICAgICAgICAgIGRhdGFMYXllci5wdXNoKGFyZ3VtZW50cyk7DQogICAgICAgIH0NCiAgICAgICAgZ3RhZygnanMnLCBuZXcgRGF0ZSgpKTsNCiAgICAgICAgZ3RhZygnY29uZmlnJywgJ0ctV1g1VlM1NFpEVycpOw0KICAgIDwvc2NyaXB0Pg0KICAgIDxtZXRhIGNoYXJzZXQ9IlVURi04Ij4NCiAgICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCI+DQogICAgPHRpdGxlPmduLW1hdGg8L3RpdGxlPg0KICAgIDxtZXRhIG5hbWU9InRpdGxlIiBjb250ZW50PSJHTi1NYXRoIj4NCiAgICA8bWV0YSBuYW1lPSJkZXNjcmlwdGlvbiIgY29udGVudD0iUGxheSB1bmJsKmNrZWQgZ2FtZXMgbGlrZSBDcmF6eSBDYXR0bGUgM0QgYW5kIERyaXZlTWFkIG9uIEdOLU1hdGguIEZhc3QsIGZyZWUsIG5vIGRvd25sb2Fkc+KAlHBlcmZlY3QgZm9yIHNjaG9vbCBvciBob21lLiI+DQogICAgPG1ldGEgcHJvcGVydHk9Im9nOnR5cGUiIGNvbnRlbnQ9IndlYnNpdGUiPg0KICAgIDxtZXRhIHByb3BlcnR5PSJvZzp1cmwiIGNvbnRlbnQ9Imh0dHBzOi8vZ24tbWF0aC5naXRodWIuaW8vIj4NCiAgICA8bWV0YSBwcm9wZXJ0eT0ib2c6dGl0bGUiIGNvbnRlbnQ9IkdOLU1hdGgiPg0KICAgIDxtZXRhIHByb3BlcnR5PSJvZzpkZXNjcmlwdGlvbiIgY29udGVudD0iUGxheSB1bmJsKmNrZWQgZ2FtZXMgbGlrZSBDcmF6eSBDYXR0bGUgM0QgYW5kIERyaXZlTWFkIG9uIEdOLU1hdGguIEZhc3QsIGZyZWUsIG5vIGRvd25sb2Fkc+KAlHBlcmZlY3QgZm9yIHNjaG9vbCBvciBob21lLiI+DQogICAgPG1ldGEgbmFtZT0idHdpdHRlcjpjYXJkIiBjb250ZW50PSJzdW1tYXJ5X2xhcmdlX2ltYWdlIj4NCiAgICA8bWV0YSBuYW1lPSJ0d2l0dGVyOnVybCIgY29udGVudD0iaHR0cHM6Ly9nbi1tYXRoLmdpdGh1Yi5pby8iPg0KICAgIDxtZXRhIG5hbWU9InR3aXR0ZXI6dGl0bGUiIGNvbnRlbnQ9IkdOLU1hdGgiPg0KICAgIDxtZXRhIG5hbWU9InR3aXR0ZXI6ZGVzY3JpcHRpb24iIGNvbnRlbnQ9IlBsYXkgdW5ibCpja2VkIGdhbWVzIGxpa2UgQ3JhenkgQ2F0dGxlIDNEIGFuZCBEcml2ZU1hZCBvbiBHTi1NYXRoLiBGYXN0LCBmcmVlLCBubyBkb3dubG9hZHPigJRwZXJmZWN0IGZvciBzY2hvb2wgb3IgaG9tZS4iPg0KICAgIDxzdHlsZT4NCiAgICAgICAgOnJvb3Qgew0KICAgIC0tcHJpbWFyeTogI2ZjMjY1MTsNCiAgICAtLXByaW1hcnktaG92ZXI6ICNlOTFlNDc7DQogICAgLS1wcmltYXJ5LWxpZ2h0OiByZ2JhKDI1MiwgMzgsIDgxLCAwLjEpOw0KICAgIC0tcHJpbWFyeS1saWdodGVyOiByZ2JhKDI1MiwgMzgsIDgxLCAwLjA1KTsNCiAgICAtLWFjY2VudDogIzhiNWNmNjsNCiAgICAtLWFjY2VudC1saWdodDogcmdiYSgxMzksIDkyLCAyNDYsIDAuMSk7DQogICAgLS1zdWNjZXNzOiAjMTBiOTgxOw0KICAgIC0td2FybmluZzogI2Y1OWUwYjsNCiAgICAtLXRleHQ6ICMxYTFhMWE7DQogICAgLS10ZXh0LW11dGVkOiAjNmI3MjgwOw0KICAgIC0tdGV4dC1saWdodDogIzljYTNhZjsNCiAgICAtLWJnOiAjZmZmZmZmOw0KICAgIC0tYmctc2Vjb25kYXJ5OiAjZjhmYWZjOw0KICAgIC0tc3VyZmFjZTogI2ZmZmZmZjsNCiAgICAtLXN1cmZhY2UtaG92ZXI6ICNmMWY1Zjk7DQogICAgLS1ib3JkZXI6ICNlMmU4ZjA7DQogICAgLS1ib3JkZXItbGlnaHQ6ICNmMWY1Zjk7DQogICAgLS1nbGFzczogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjgpOw0KICAgIC0tc2hhZG93LXhzOiAwIDFweCAycHggMCByZ2IoMCAwIDAgLyAwLjA1KTsNCiAgICAtLXNoYWRvdy1zbTogMCAxcHggM3B4IDAgcmdiKDAgMCAwIC8gMC4xKSwgMCAxcHggMnB4IC0xcHggcmdiKDAgMCAwIC8gMC4xKTsNCiAgICAtLXNoYWRvdzogMCA0cHggNnB4IC0xcHggcmdiKDAgMCAwIC8gMC4xKSwgMCAycHggNHB4IC0ycHggcmdiKDAgMCAwIC8gMC4xKTsNCiAgICAtLXNoYWRvdy1sZzogMCAxMHB4IDE1cHggLTNweCByZ2IoMCAwIDAgLyAwLjEpLCAwIDRweCA2cHggLTRweCByZ2IoMCAwIDAgLyAwLjEpOw0KICAgIC0tc2hhZG93LXhsOiAwIDIwcHggMjVweCAtNXB4IHJnYigwIDAgMCAvIDAuMSksIDAgOHB4IDEwcHggLTZweCByZ2IoMCAwIDAgLyAwLjEpOw0KICAgIC0tc2hhZG93LWdsb3c6IDAgMCAyMHB4IHJnYmEoMjUyLCAzOCwgODEsIDAuMyk7DQogICAgLS1yYWRpdXM6IDEycHg7DQogICAgLS1yYWRpdXMtc206IDhweDsNCiAgICAtLXJhZGl1cy1sZzogMTZweDsNCiAgICAtLXJhZGl1cy14bDogMjBweDsNCiAgICAtLWdyYWRpZW50LXByaW1hcnk6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICNmYzI2NTEgMCUsICNlOTFlNDcgMTAwJSk7DQogICAgLS1ncmFkaWVudC1hY2NlbnQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICM4YjVjZjYgMCUsICM3YzNhZWQgMTAwJSk7DQogICAgLS1ncmFkaWVudC1zdXJmYWNlOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjZmZmZmZmIDAlLCAjZjhmYWZjIDEwMCUpOw0KfQ0KDQouZGFyay1tb2RlIHsNCiAgICAtLXByaW1hcnk6ICNmYzI2NTE7DQogICAgLS1wcmltYXJ5LWhvdmVyOiAjZmY0ZDc1Ow0KICAgIC0tcHJpbWFyeS1saWdodDogcmdiYSgyNTIsIDM4LCA4MSwgMC4xNSk7DQogICAgLS1wcmltYXJ5LWxpZ2h0ZXI6IHJnYmEoMjUyLCAzOCwgODEsIDAuMDgpOw0KICAgIC0tYWNjZW50OiAjYTg1NWY3Ow0KICAgIC0tYWNjZW50LWxpZ2h0OiByZ2JhKDE2OCwgODUsIDI0NywgMC4xNSk7DQogICAgLS1zdWNjZXNzOiAjMzRkMzk5Ow0KICAgIC0td2FybmluZzogI2ZiYmYyNDsNCiAgICAtLXRleHQ6ICNmMWY1Zjk7DQogICAgLS10ZXh0LW11dGVkOiAjOTRhM2I4Ow0KICAgIC0tdGV4dC1saWdodDogIzY0NzQ4YjsNCiAgICAtLWJnOiAjMGYxNzJhOw0KICAgIC0tYmctc2Vjb25kYXJ5OiAjMWUyOTNiOw0KICAgIC0tc3VyZmFjZTogIzFlMjkzYjsNCiAgICAtLXN1cmZhY2UtaG92ZXI6ICMzMzQxNTU7DQogICAgLS1ib3JkZXI6ICMzMzQxNTU7DQogICAgLS1ib3JkZXItbGlnaHQ6ICM0NzU1Njk7DQogICAgLS1nbGFzczogcmdiYSgzMCwgNDEsIDU5LCAwLjgpOw0KICAgIC0tc2hhZG93LXhzOiAwIDFweCAycHggMCByZ2IoMCAwIDAgLyAwLjQpOw0KICAgIC0tc2hhZG93LXNtOiAwIDFweCAzcHggMCByZ2IoMCAwIDAgLyAwLjUpLCAwIDFweCAycHggLTFweCByZ2IoMCAwIDAgLyAwLjUpOw0KICAgIC0tc2hhZG93OiAwIDRweCA2cHggLTFweCByZ2IoMCAwIDAgLyAwLjUpLCAwIDJweCA0cHggLTJweCByZ2IoMCAwIDAgLyAwLjUpOw0KICAgIC0tc2hhZG93LWxnOiAwIDEwcHggMTVweCAtM3B4IHJnYigwIDAgMCAvIDAuNiksIDAgNHB4IDZweCAtNHB4IHJnYigwIDAgMCAvIDAuNik7DQogICAgLS1zaGFkb3cteGw6IDAgMjBweCAyNXB4IC01cHggcmdiKDAgMCAwIC8gMC43KSwgMCA4cHggMTBweCAtNnB4IHJnYigwIDAgMCAvIDAuNyk7DQogICAgLS1zaGFkb3ctZ2xvdzogMCAwIDIwcHggcmdiYSgyNTIsIDM4LCA4MSwgMC40KTsNCiAgICAtLWdyYWRpZW50LXByaW1hcnk6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICNmYzI2NTEgMCUsICNmZjRkNzUgMTAwJSk7DQogICAgLS1ncmFkaWVudC1hY2NlbnQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICNhODU1ZjcgMCUsICM5MzMzZWEgMTAwJSk7DQogICAgLS1ncmFkaWVudC1zdXJmYWNlOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjMWUyOTNiIDAlLCAjMzM0MTU1IDEwMCUpOw0KfQ0KDQoqIHsNCiAgICBib3gtc2l6aW5nOiBib3JkZXItYm94Ow0KfQ0KDQpib2R5IHsNCiAgICBmb250LWZhbWlseTogLWFwcGxlLXN5c3RlbSwgQmxpbmtNYWNTeXN0ZW1Gb250LCAnU0YgUHJvIERpc3BsYXknLCAnU2Vnb2UgVUknLCBzeXN0ZW0tdWksIHNhbnMtc2VyaWY7DQogICAgbGluZS1oZWlnaHQ6IDEuNjsNCiAgICBtYXJnaW46IDA7DQogICAgcGFkZGluZzogMDsNCiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iZyk7DQogICAgY29sb3I6IHZhcigtLXRleHQpOw0KICAgIHRyYW5zaXRpb246IGFsbCAwLjNzIGN1YmljLWJlemllcigwLjQsIDAsIDAuMiwgMSk7DQogICAgZm9udC13ZWlnaHQ6IDQwMDsNCiAgICAtd2Via2l0LWZvbnQtc21vb3RoaW5nOiBhbnRpYWxpYXNlZDsNCiAgICAtbW96LW9zeC1mb250LXNtb290aGluZzogZ3JheXNjYWxlOw0KfQ0KDQpoZWFkZXIgew0KICAgIGJhY2tncm91bmQ6IHZhcigtLWdyYWRpZW50LXByaW1hcnkpOw0KICAgIGNvbG9yOiB3aGl0ZTsNCiAgICBwb3NpdGlvbjogc3RpY2t5Ow0KICAgIHRvcDogMDsNCiAgICB6LWluZGV4OiAxMDA7DQogICAgYm94LXNoYWRvdzogdmFyKC0tc2hhZG93LWxnKTsNCiAgICBiYWNrZHJvcC1maWx0ZXI6IGJsdXIoMjBweCk7DQp9DQoNCi5oZWFkZXItY29udGVudCB7DQogICAgbWF4LXdpZHRoOiAxMjAwcHg7DQogICAgbWFyZ2luOiAwIGF1dG87DQogICAgcGFkZGluZzogMS4yNXJlbSAxcmVtOw0KICAgIGRpc3BsYXk6IGZsZXg7DQogICAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47DQogICAgZ2FwOiAxLjVyZW07DQp9DQoNCi5sb2dvIHsNCiAgICBmb250LXNpemU6IDEuNzVyZW07DQogICAgZm9udC13ZWlnaHQ6IDgwMDsNCiAgICBsZXR0ZXItc3BhY2luZzogLTAuMDJlbTsNCiAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjZmZmZmZmIDAlLCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuOCkgMTAwJSk7DQogICAgLXdlYmtpdC1iYWNrZ3JvdW5kLWNsaXA6IHRleHQ7DQogICAgLXdlYmtpdC10ZXh0LWZpbGwtY29sb3I6IHRyYW5zcGFyZW50Ow0KICAgIGJhY2tncm91bmQtY2xpcDogdGV4dDsNCn0NCg0KLnNlYXJjaC1jb250YWluZXIgew0KICAgIGRpc3BsYXk6IGZsZXg7DQogICAgZmxleDogMTsNCiAgICBtYXgtd2lkdGg6IDUwMHB4Ow0KICAgIGdhcDogMC43NXJlbTsNCn0NCg0KI3NlYXJjaEJhciB7DQogICAgZmxleDogMTsNCiAgICBwYWRkaW5nOiAwLjg3NXJlbSAxcmVtOw0KICAgIGJvcmRlcjogMDsNCiAgICBib3JkZXItcmFkaXVzOiB2YXIoLS1yYWRpdXMpOw0KICAgIGJhY2tncm91bmQ6IHZhcigtLWdsYXNzKTsNCiAgICBiYWNrZHJvcC1maWx0ZXI6IGJsdXIoMjBweCk7DQogICAgY29sb3I6IHZhcigtLXRleHQpOw0KICAgIGZvbnQtc2l6ZTogMTVweDsNCiAgICBvdXRsaW5lOiBub25lOw0KICAgIHRyYW5zaXRpb246IGFsbCAwLjNzIGN1YmljLWJlemllcigwLjQsIDAsIDAuMiwgMSk7DQogICAgYm94LXNoYWRvdzogdmFyKC0tc2hhZG93LXNtKTsNCn0NCg0KI3NlYXJjaEJhcjpmb2N1cyB7DQogICAgYmFja2dyb3VuZDogdmFyKC0tdGV4dCk7DQogICAgYm94LXNoYWRvdzogMCAwIDAgM3B4IHJnYmEoMjUyLCAzOCwgODEsIDAuMjUpLCB2YXIoLS1zaGFkb3cpOw0KICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMXB4KTsNCiAgICBjb2xvcjogdmFyKC0tZ2xhc3MpOw0KfQ0KDQojc2VhcmNoQmFyOjpwbGFjZWhvbGRlciB7DQogICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpOw0KfQ0KDQojc29ydE9wdGlvbnMgew0KICAgIHBhZGRpbmc6IDAuODc1cmVtIDFyZW07DQogICAgYm9yZGVyOiAwOw0KICAgIGJvcmRlci1yYWRpdXM6IHZhcigtLXJhZGl1cyk7DQogICAgYmFja2dyb3VuZDogdmFyKC0tZ2xhc3MpOw0KICAgIGJhY2tkcm9wLWZpbHRlcjogYmx1cigyMHB4KTsNCiAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7DQogICAgZm9udC1zaXplOiAxNXB4Ow0KICAgIGN1cnNvcjogcG9pbnRlcjsNCiAgICBvdXRsaW5lOiBub25lOw0KICAgIHRyYW5zaXRpb246IGFsbCAwLjNzIGN1YmljLWJlemllcigwLjQsIDAsIDAuMiwgMSk7DQogICAgbWluLXdpZHRoOiAxMzBweDsNCiAgICBib3gtc2hhZG93OiB2YXIoLS1zaGFkb3ctc20pOw0KfQ0KDQojc29ydE9wdGlvbnM6aG92ZXIgew0KICAgIGJhY2tncm91bmQ6IHZhcigtLXRleHQpOw0KICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMXB4KTsNCiAgICBib3gtc2hhZG93OiB2YXIoLS1zaGFkb3cpOw0KICAgIGNvbG9yOiB2YXIoLS1nbGFzcyk7DQp9DQoNCiNmaWx0ZXJPcHRpb25zIHsNCiAgICBwYWRkaW5nOiAwLjg3NXJlbSAxcmVtOw0KICAgIGJvcmRlcjogMDsNCiAgICBib3JkZXItcmFkaXVzOiB2YXIoLS1yYWRpdXMpOw0KICAgIGJhY2tncm91bmQ6IHZhcigtLWdsYXNzKTsNCiAgICBiYWNrZHJvcC1maWx0ZXI6IGJsdXIoMjBweCk7DQogICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpOw0KICAgIGZvbnQtc2l6ZTogMTVweDsNCiAgICBjdXJzb3I6IHBvaW50ZXI7DQogICAgb3V0bGluZTogbm9uZTsNCiAgICB0cmFuc2l0aW9uOiBhbGwgMC4zcyBjdWJpYy1iZXppZXIoMC40LCAwLCAwLjIsIDEpOw0KICAgIG1pbi13aWR0aDogMTMwcHg7DQogICAgYm94LXNoYWRvdzogdmFyKC0tc2hhZG93LXNtKTsNCn0NCg0KI2ZpbHRlck9wdGlvbnM6aG92ZXIgew0KICAgIGJhY2tncm91bmQ6IHZhcigtLXRleHQpOw0KICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMXB4KTsNCiAgICBib3gtc2hhZG93OiB2YXIoLS1zaGFkb3cpOw0KICAgIGNvbG9yOiB2YXIoLS1nbGFzcyk7DQp9DQoNCi5jb250cm9sLWJ1dHRvbnMgew0KICAgIGRpc3BsYXk6IGZsZXg7DQogICAgZ2FwOiAwLjVyZW07DQp9DQoNCm1haW4gew0KICAgIG1hcmdpbjogMCBhdXRvOw0KICAgIHBhZGRpbmc6IDJyZW0gMXJlbTsNCiAgICBwYWRkaW5nLWJvdHRvbTogNnJlbTsNCn0NCg0KI3pvbmVDb3VudCB7DQogICAgbWFyZ2luOiAwIDAgMS41cmVtOw0KICAgIGZvbnQtc2l6ZTogMTRweDsNCiAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7DQogICAgZm9udC13ZWlnaHQ6IDYwMDsNCiAgICBkaXNwbGF5OiBmbGV4Ow0KICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgZ2FwOiAwLjVyZW07DQp9DQoNCiN6b25lQ291bnQ6OmJlZm9yZSB7DQogICAgY29udGVudDogJyc7DQogICAgd2lkdGg6IDRweDsNCiAgICBoZWlnaHQ6IDRweDsNCiAgICBib3JkZXItcmFkaXVzOiA1MCU7DQogICAgYmFja2dyb3VuZDogdmFyKC0tcHJpbWFyeSk7DQp9DQoNCiNjb250YWluZXIsDQojZmVhdHVyZWRab25lcyB7DQogICAgZGlzcGxheTogZ3JpZDsNCiAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdChhdXRvLWZpbGwsIG1pbm1heCgyMDBweCwgMWZyKSk7DQogICAgZ2FwOiAxLjVyZW07DQp9DQoNCi56b25lLWl0ZW0gew0KICAgIGJhY2tncm91bmQ6IHZhcigtLWdyYWRpZW50LXN1cmZhY2UpOw0KICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJvcmRlcik7DQogICAgYm9yZGVyLXJhZGl1czogdmFyKC0tcmFkaXVzLWxnKTsNCiAgICBvdmVyZmxvdzogaGlkZGVuOw0KICAgIGN1cnNvcjogcG9pbnRlcjsNCiAgICB0cmFuc2l0aW9uOiBhbGwgMC40cyBjdWJpYy1iZXppZXIoMC40LCAwLCAwLjIsIDEpOw0KICAgIGRpc3BsYXk6IGZsZXg7DQogICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsNCiAgICBwb3NpdGlvbjogcmVsYXRpdmU7DQogICAgYm94LXNoYWRvdzogdmFyKC0tc2hhZG93LXNtKTsNCn0NCg0KLnpvbmUtaXRlbTpob3ZlciB7DQogICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC04cHgpIHNjYWxlKDEuMDIpOw0KICAgIGJveC1zaGFkb3c6IHZhcigtLXNoYWRvdy14bCk7DQogICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1wcmltYXJ5KTsNCn0NCg0KLnpvbmUtaXRlbTpob3Zlcjo6YmVmb3JlIHsNCiAgICBvcGFjaXR5OiAxOw0KfQ0KDQouem9uZS1pdGVtOjpiZWZvcmUgew0KICAgIGNvbnRlbnQ6ICcnOw0KICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICBpbnNldDogMDsNCiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1wcmltYXJ5LWxpZ2h0KTsNCiAgICBvcGFjaXR5OiAwOw0KICAgIHRyYW5zaXRpb246IG9wYWNpdHkgMC40cyBlYXNlOw0KICAgIHBvaW50ZXItZXZlbnRzOiBub25lOw0KICAgIHotaW5kZXg6IDE7DQp9DQoNCi56b25lLWl0ZW0gaW1nIHsNCiAgICB3aWR0aDogMTAwJTsNCiAgICBhc3BlY3QtcmF0aW86IDE7DQogICAgb2JqZWN0LWZpdDogY292ZXI7DQogICAgZGlzcGxheTogYmxvY2s7DQogICAgYmFja2dyb3VuZDogdmFyKC0tYm9yZGVyLWxpZ2h0KTsNCiAgICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMC40cyBjdWJpYy1iZXppZXIoMC40LCAwLCAwLjIsIDEpOw0KfQ0KDQouem9uZS1pdGVtOmhvdmVyIGltZyB7DQogICAgdHJhbnNmb3JtOiBzY2FsZSgxLjA1KTsNCn0NCg0KLnpvbmUtaXRlbSBidXR0b24gew0KICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50Ow0KICAgIGNvbG9yOiB2YXIoLS10ZXh0KTsNCiAgICBib3JkZXI6IDA7DQogICAgcGFkZGluZzogMS4yNXJlbSAxcmVtOw0KICAgIGN1cnNvcjogcG9pbnRlcjsNCiAgICBmb250LXdlaWdodDogNjAwOw0KICAgIGZvbnQtc2l6ZTogMTRweDsNCiAgICBsaW5lLWhlaWdodDogMS40Ow0KICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgICB0cmFuc2l0aW9uOiBhbGwgMC4zcyBjdWJpYy1iZXppZXIoMC40LCAwLCAwLjIsIDEpOw0KICAgIG1pbi1oZWlnaHQ6IDcwcHg7DQogICAgZGlzcGxheTogZmxleDsNCiAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsNCiAgICB6LWluZGV4OiAyOw0KfQ0KDQouem9uZS1pdGVtOmhvdmVyIGJ1dHRvbiB7DQogICAgY29sb3I6IHZhcigtLXByaW1hcnkpOw0KICAgIGJhY2tncm91bmQ6IHJnYmEoMjUyLCAzOCwgODEsIDAuMDUpOw0KfQ0KDQojem9uZVZpZXdlciB7DQogICAgcG9zaXRpb246IGZpeGVkOw0KICAgIGluc2V0OiAwOw0KICAgIGJhY2tncm91bmQ6IHZhcigtLWJnKTsNCiAgICB6LWluZGV4OiAxMDAwOw0KICAgIGRpc3BsYXk6IG5vbmU7DQogICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsNCiAgICBhbmltYXRpb246IHNsaWRlSW5VcCAwLjNzIGN1YmljLWJlemllcigwLjQsIDAsIDAuMiwgMSk7DQp9DQoNCkBrZXlmcmFtZXMgc2xpZGVJblVwIHsNCiAgICBmcm9tIHsNCiAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDEwMCUpOw0KICAgIH0NCiAgICB0byB7DQogICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgwKTsNCiAgICB9DQp9DQoNCi56b25lLWhlYWRlciB7DQogICAgYmFja2dyb3VuZDogdmFyKC0tZ3JhZGllbnQtcHJpbWFyeSk7DQogICAgY29sb3I6IHdoaXRlOw0KICAgIHBhZGRpbmc6IDFyZW0gMS41cmVtOw0KICAgIGRpc3BsYXk6IGZsZXg7DQogICAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47DQogICAgYm94LXNoYWRvdzogdmFyKC0tc2hhZG93LWxnKTsNCn0NCg0KLnpvbmUtdGl0bGUgew0KICAgIGZsZXg6IDE7DQogICAgbWluLXdpZHRoOiAwOw0KfQ0KDQojem9uZU5hbWUgew0KICAgIGZvbnQtc2l6ZTogMS4yNXJlbTsNCiAgICBmb250LXdlaWdodDogNzAwOw0KICAgIG1hcmdpbjogMCAwIDAuMjVyZW07DQogICAgbGluZS1oZWlnaHQ6IDEuMzsNCn0NCg0KI3pvbmVJZCB7DQogICAgZGlzcGxheTogbm9uZTsNCn0NCg0KI3pvbmVBdXRob3Igew0KICAgIGZvbnQtc2l6ZTogMTRweDsNCiAgICBjb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjgpOw0KICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTsNCiAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycyBlYXNlOw0KICAgIGZvbnQtd2VpZ2h0OiA1MDA7DQp9DQoNCiN6b25lQXV0aG9yOmhvdmVyIHsNCiAgICBjb2xvcjogd2hpdGU7DQogICAgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7DQp9DQoNCi56b25lLWNvbnRyb2xzIHsNCiAgICBkaXNwbGF5OiBmbGV4Ow0KICAgIGdhcDogMC43NXJlbTsNCn0NCg0KLnpvbmUtY29udHJvbHMgYnV0dG9uIHsNCiAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMSk7DQogICAgYm9yZGVyOiAxcHggc29saWQgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjMpOw0KICAgIGNvbG9yOiB3aGl0ZTsNCiAgICBwYWRkaW5nOiAwLjYyNXJlbSAxcmVtOw0KICAgIGJvcmRlci1yYWRpdXM6IHZhcigtLXJhZGl1cyk7DQogICAgY3Vyc29yOiBwb2ludGVyOw0KICAgIGZvbnQtc2l6ZTogMTRweDsNCiAgICBmb250LXdlaWdodDogNjAwOw0KICAgIHRyYW5zaXRpb246IGFsbCAwLjNzIGN1YmljLWJlemllcigwLjQsIDAsIDAuMiwgMSk7DQogICAgYmFja2Ryb3AtZmlsdGVyOiBibHVyKDIwcHgpOw0KfQ0KDQouem9uZS1jb250cm9scyBidXR0b246aG92ZXIgew0KICAgIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4yKTsNCiAgICBib3JkZXItY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC41KTsNCiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTFweCk7DQogICAgYm94LXNoYWRvdzogdmFyKC0tc2hhZG93KTsNCn0NCg0KI3pvbmVGcmFtZSB7DQogICAgZmxleC1ncm93OiAxOw0KICAgIGJvcmRlcjogbm9uZTsNCiAgICB3aWR0aDogOTAlOw0KICAgIGhlaWdodDogOTAlOw0KfQ0KDQojcG9wdXBPdmVybGF5IHsNCiAgICBwb3NpdGlvbjogZml4ZWQ7DQogICAgaW5zZXQ6IDA7DQogICAgYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjYpOw0KICAgIGJhY2tkcm9wLWZpbHRlcjogYmx1cig4cHgpOw0KICAgIGRpc3BsYXk6IG5vbmU7DQogICAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgICB6LWluZGV4OiAyMDAwOw0KICAgIHBhZGRpbmc6IDFyZW07DQogICAgYW5pbWF0aW9uOiBmYWRlSW4gMC4zcyBlYXNlOw0KfQ0KDQpAa2V5ZnJhbWVzIGZhZGVJbiB7DQogICAgZnJvbSB7DQogICAgICAgIG9wYWNpdHk6IDA7DQogICAgfQ0KICAgIHRvIHsNCiAgICAgICAgb3BhY2l0eTogMTsNCiAgICB9DQp9DQoNCi5wb3B1cCB7DQogICAgYmFja2dyb3VuZDogdmFyKC0tc3VyZmFjZSk7DQogICAgYm9yZGVyLXJhZGl1czogdmFyKC0tcmFkaXVzLWxnKTsNCiAgICBib3gtc2hhZG93OiB2YXIoLS1zaGFkb3cteGwpOw0KICAgIHdpZHRoOiAxMDAlOw0KICAgIG1heC13aWR0aDogNTIwcHg7DQogICAgbWF4LWhlaWdodDogODB2aDsNCiAgICBvdmVyZmxvdzogaGlkZGVuOw0KICAgIGRpc3BsYXk6IGZsZXg7DQogICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsNCiAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1ib3JkZXIpOw0KICAgIGFuaW1hdGlvbjogc2xpZGVJblNjYWxlIDAuM3MgY3ViaWMtYmV6aWVyKDAuNCwgMCwgMC4yLCAxKTsNCn0NCg0KQGtleWZyYW1lcyBzbGlkZUluU2NhbGUgew0KICAgIGZyb20gew0KICAgICAgICB0cmFuc2Zvcm06IHNjYWxlKDAuOSkgdHJhbnNsYXRlWSgyMHB4KTsNCiAgICAgICAgb3BhY2l0eTogMDsNCiAgICB9DQogICAgdG8gew0KICAgICAgICB0cmFuc2Zvcm06IHNjYWxlKDEpIHRyYW5zbGF0ZVkoMCk7DQogICAgICAgIG9wYWNpdHk6IDE7DQogICAgfQ0KfQ0KDQoucG9wdXAtaGVhZGVyIHsNCiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1ncmFkaWVudC1wcmltYXJ5KTsNCiAgICBjb2xvcjogd2hpdGU7DQogICAgcGFkZGluZzogMS4yNXJlbSAxLjVyZW07DQogICAgZGlzcGxheTogZmxleDsNCiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47DQogICAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCn0NCg0KI3BvcHVwVGl0bGUgew0KICAgIG1hcmdpbjogMDsNCiAgICBmb250LXNpemU6IDEuMjVyZW07DQogICAgZm9udC13ZWlnaHQ6IDcwMDsNCn0NCg0KI3BvcHVwQ2xvc2Ugew0KICAgIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xKTsNCiAgICBib3JkZXI6IDA7DQogICAgY29sb3I6IHdoaXRlOw0KICAgIGZvbnQtc2l6ZTogMS4yNXJlbTsNCiAgICBjdXJzb3I6IHBvaW50ZXI7DQogICAgcGFkZGluZzogMC41cmVtOw0KICAgIGJvcmRlci1yYWRpdXM6IHZhcigtLXJhZGl1cyk7DQogICAgdHJhbnNpdGlvbjogYWxsIDAuM3MgY3ViaWMtYmV6aWVyKDAuNCwgMCwgMC4yLCAxKTsNCiAgICBsaW5lLWhlaWdodDogMTsNCiAgICB3aWR0aDogMzZweDsNCiAgICBoZWlnaHQ6IDM2cHg7DQogICAgZGlzcGxheTogZmxleDsNCiAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICAgIGJhY2tkcm9wLWZpbHRlcjogYmx1cigyMHB4KTsNCn0NCg0KI3BvcHVwQ2xvc2U6aG92ZXIgew0KICAgIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4yKTsNCiAgICB0cmFuc2Zvcm06IHNjYWxlKDEuMSk7DQp9DQoNCiNwb3B1cEJvZHkgew0KICAgIHBhZGRpbmc6IDEuNXJlbTsNCiAgICBvdmVyZmxvdy15OiBhdXRvOw0KICAgIGNvbG9yOiB2YXIoLS10ZXh0KTsNCn0NCg0KI3BvcHVwQm9keSBpbnB1dFt0eXBlPSJ0ZXh0Il0sDQojcG9wdXBCb2R5IGlucHV0W3R5cGU9ImZpbGUiXSB7DQogICAgd2lkdGg6IDEwMCU7DQogICAgcGFkZGluZzogMC44NzVyZW0gMXJlbTsNCiAgICBtYXJnaW4tYm90dG9tOiAxLjI1cmVtOw0KICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJvcmRlcik7DQogICAgYm9yZGVyLXJhZGl1czogdmFyKC0tcmFkaXVzKTsNCiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iZy1zZWNvbmRhcnkpOw0KICAgIGNvbG9yOiB2YXIoLS10ZXh0KTsNCiAgICBmb250LXNpemU6IDE1cHg7DQogICAgdHJhbnNpdGlvbjogYWxsIDAuM3MgY3ViaWMtYmV6aWVyKDAuNCwgMCwgMC4yLCAxKTsNCiAgICBvdXRsaW5lOiBub25lOw0KfQ0KDQojcG9wdXBCb2R5IGlucHV0W3R5cGU9InRleHQiXTpmb2N1cywNCiNwb3B1cEJvZHkgaW5wdXRbdHlwZT0iZmlsZSJdOmZvY3VzIHsNCiAgICBib3JkZXItY29sb3I6IHZhcigtLXByaW1hcnkpOw0KICAgIGJveC1zaGFkb3c6IDAgMCAwIDNweCByZ2JhKDI1MiwgMzgsIDgxLCAwLjEpOw0KICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMXB4KTsNCn0NCg0KZm9vdGVyIHsNCiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iZy1zZWNvbmRhcnkpOw0KICAgIGJvcmRlci10b3A6IDFweCBzb2xpZCB2YXIoLS1ib3JkZXIpOw0KICAgIHBhZGRpbmc6IDFyZW0gMXJlbTsNCiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQoNCiAgICBwb3NpdGlvbjogZml4ZWQ7DQogICAgYm90dG9tOiAwOw0KICAgIGxlZnQ6IDA7DQogICAgd2lkdGg6IDEwMCU7DQogICAgei1pbmRleDogMTAwOw0KfQ0KDQouZm9vdGVyLWxpbmtzIHsNCiAgICBkaXNwbGF5OiBmbGV4Ow0KICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICAgIGdhcDogMnJlbTsNCiAgICBmbGV4LXdyYXA6IHdyYXA7DQp9DQoNCi5mb290ZXItbGlua3MgYSB7DQogICAgY29sb3I6IHZhcigtLXByaW1hcnkpOw0KICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTsNCiAgICBmb250LXdlaWdodDogNjAwOw0KICAgIGZvbnQtc2l6ZTogMTVweDsNCiAgICB0cmFuc2l0aW9uOiBhbGwgMC4zcyBjdWJpYy1iZXppZXIoMC40LCAwLCAwLjIsIDEpOw0KICAgIHBhZGRpbmc6IDAuNXJlbSAxcmVtOw0KICAgIGJvcmRlci1yYWRpdXM6IHZhcigtLXJhZGl1cyk7DQp9DQoNCi5mb290ZXItbGlua3MgYTpob3ZlciB7DQogICAgY29sb3I6IHZhcigtLXByaW1hcnktaG92ZXIpOw0KICAgIGJhY2tncm91bmQ6IHZhcigtLXByaW1hcnktbGlnaHQpOw0KICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMXB4KTsNCn0NCg0KQG1lZGlhIChtYXgtd2lkdGg6IDc2OHB4KSB7DQogICAgLmhlYWRlci1jb250ZW50IHsNCiAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsNCiAgICAgICAgZ2FwOiAxcmVtOw0KICAgICAgICBwYWRkaW5nOiAxcmVtOw0KICAgIH0NCg0KICAgIC5zZWFyY2gtY29udGFpbmVyIHsNCiAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgICAgIG1heC13aWR0aDogbm9uZTsNCiAgICB9DQoNCiAgICBtYWluIHsNCiAgICAgICAgcGFkZGluZzogMS41cmVtIDFyZW07DQogICAgfQ0KDQogICAgI2NvbnRhaW5lciwNCiAgICAjZmVhdHVyZWRab25lcyB7DQogICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KGF1dG8tZmlsbCwgbWlubWF4KDE2MHB4LCAxZnIpKTsNCiAgICAgICAgZ2FwOiAxLjI1cmVtOw0KICAgIH0NCg0KICAgIC56b25lLWl0ZW0gYnV0dG9uIHsNCiAgICAgICAgcGFkZGluZzogMXJlbSAwLjc1cmVtOw0KICAgICAgICBtaW4taGVpZ2h0OiA2NXB4Ow0KICAgICAgICBmb250LXNpemU6IDEzcHg7DQogICAgfQ0KDQogICAgLmZvb3Rlci1saW5rcyB7DQogICAgICAgIGdhcDogMS41cmVtOw0KICAgIH0NCn0NCg0KQG1lZGlhIChtYXgtd2lkdGg6IDQ4MHB4KSB7DQogICAgI2NvbnRhaW5lciwNCiAgICAjZmVhdHVyZWRab25lcyB7DQogICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KGF1dG8tZmlsbCwgbWlubWF4KDE0MHB4LCAxZnIpKTsNCiAgICAgICAgZ2FwOiAxcmVtOw0KICAgIH0NCg0KICAgIC5wb3B1cCB7DQogICAgICAgIG1hcmdpbjogMC41cmVtOw0KICAgIH0NCg0KICAgIC56b25lLWl0ZW06aG92ZXIgew0KICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTEwcHgpIHNjYWxlKDEuMDEpOw0KICAgIH0NCg0KfQ0KLmNvbnRyb2wtYnV0dG9uIGltZyB7DQogICAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDAuNHMgZWFzZTsNCiAgICB3aWR0aDogMjRweDsNCiAgICBoZWlnaHQ6IDI0cHg7DQp9DQoNCi5jb250cm9sLWJ1dHRvbjpob3ZlciBpbWcgew0KICAgIHRyYW5zZm9ybTogcm90YXRlKDQwZGVnKTsNCn0NCg0KLmNvbnRyb2wtYnV0dG9uLA0KLmNvbnRyb2wtYnV0dG9uOmhvdmVyIHsNCiAgICBib3gtc2hhZG93OiBub25lOw0KICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMnB4KTsNCiAgICBib3gtc2hhZG93OiB2YXIoLS1zaGFkb3ctbGcpOw0KfQ0KLmNvbnRyb2wtYnV0dG9uOmFjdGl2ZSB7DQogICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDApOw0KfQ0KDQouY29udHJvbC1idXR0b25zIGJ1dHRvbiB7DQogICAgYmFja2dyb3VuZDogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjEpOw0KICAgIGJvcmRlcjogMDsNCiAgICBjb2xvcjogd2hpdGU7DQogICAgY3Vyc29yOiBwb2ludGVyOw0KICAgIHBhZGRpbmc6IDA7DQogICAgd2lkdGg6IDQ0cHg7DQogICAgaGVpZ2h0OiA0NHB4Ow0KICAgIGJvcmRlci1yYWRpdXM6IHZhcigtLXJhZGl1cyk7DQogICAgZGlzcGxheTogZmxleDsNCiAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICAgIGJhY2tkcm9wLWZpbHRlcjogYmx1cigyMHB4KTsNCn0NCi5jb250cm9sLWJ1dHRvbnMgYnV0dG9uOmhvdmVyIHsNCiAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMik7DQp9DQouc2V0dGluZ3MtYnV0dG9uIHsNCiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1ncmFkaWVudC1wcmltYXJ5KTsNCiAgICBjb2xvcjogd2hpdGU7DQogICAgYm9yZGVyOiAwOw0KICAgIHBhZGRpbmc6IDAuODc1cmVtIDEuNXJlbTsNCiAgICBmb250LXNpemU6IDE1cHg7DQogICAgZm9udC13ZWlnaHQ6IDYwMDsNCiAgICBib3JkZXItcmFkaXVzOiB2YXIoLS1yYWRpdXMpOw0KICAgIGN1cnNvcjogcG9pbnRlcjsNCiAgICB0cmFuc2l0aW9uOiBhbGwgMC4zcyBjdWJpYy1iZXppZXIoMC40LCAwLCAwLjIsIDEpOw0KICAgIGJveC1zaGFkb3c6IHZhcigtLXNoYWRvdy1zbSk7DQogICAgbWluLXdpZHRoOiAyMDBweDsNCiAgICB3aWR0aDogMTAwJTsNCiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQp9DQoNCi5zZXR0aW5ncy1idXR0b246aG92ZXIgew0KICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMnB4KTsNCiAgICBib3gtc2hhZG93OiB2YXIoLS1zaGFkb3ctbGcpOw0KfQ0KDQouc2V0dGluZ3MtYnV0dG9uOmFjdGl2ZSB7DQogICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDApOw0KICAgIGJveC1zaGFkb3c6IHZhcigtLXNoYWRvdy1zbSk7DQp9DQoNCi5pbmZvLWJ1dHRvbiB7DQogICAgYmFja2dyb3VuZDogbm9uZTsNCiAgICBib3JkZXI6IG5vbmU7DQogICAgY3Vyc29yOiBwb2ludGVyOw0KICAgIHBhZGRpbmc6IDA7DQogICAgbWFyZ2luLWxlZnQ6IDEwcHg7DQogICAgZGlzcGxheTogaW5saW5lLWZsZXg7DQogICAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgICB3aWR0aDogMjRweDsNCiAgICBoZWlnaHQ6IDI0cHg7DQogICAgYm9yZGVyLXJhZGl1czogNTAlOw0KICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgMC4ycywgdHJhbnNmb3JtIDAuMnM7DQogICAgY29sb3I6IGluaGVyaXQ7DQogICAgdmVydGljYWwtYWxpZ246IG1pZGRsZTsNCn0NCg0KLmluZm8tYnV0dG9uOmhvdmVyIHsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMSk7DQogICAgdHJhbnNmb3JtOiBzY2FsZSgxLjEpOw0KfQ0KDQouaW5mby1idXR0b246YWN0aXZlIHsNCiAgICB0cmFuc2Zvcm06IHNjYWxlKDAuOTUpOw0KfQ0KDQouaW5mby1idXR0b24gc3ZnIHsNCiAgICBkaXNwbGF5OiBibG9jazsNCn0NCiAgICA8L3N0eWxlPg0KICAgIDxsaW5rIHJlbD0ibWFuaWZlc3QiIGhyZWY9Im1hbmlmZXN0Lmpzb24iPg0KICAgIDxtZXRhIG5hbWU9InRoZW1lLWNvbG9yIiBjb250ZW50PSIjZmIyNjUxIj4NCjwvaGVhZD4NCjxib2R5IGNsYXNzPSJkYXJrLW1vZGUiPg0KICAgIDxoZWFkZXI+DQogICAgICAgIDxkaXYgY2xhc3M9ImhlYWRlci1jb250ZW50Ij4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImxvZ28iPmduLW1hdGg8L2Rpdj4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9InNlYXJjaC1jb250YWluZXIiPg0KICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0ic2VhcmNoQmFyIiBwbGFjZWhvbGRlcj0iU2VhcmNoIHpvbmVzLi4uIiBvbmlucHV0PSJmaWx0ZXJab25lcygpIj4NCiAgICAgICAgICAgICAgICA8c2VsZWN0IGlkPSJzb3J0T3B0aW9ucyIgb25jaGFuZ2U9InNvcnRab25lcygpIj4NCiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0ibmFtZSI+TmFtZTwvb3B0aW9uPg0KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJpZCI+SUQgKERhdGUpPC9vcHRpb24+DQogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9InBvcHVsYXIiPlBvcHVsYXI8L29wdGlvbj4NCiAgICAgICAgICAgICAgICA8L3NlbGVjdD4NCiAgICAgICAgICAgICAgICA8c2VsZWN0IGlkPSJmaWx0ZXJPcHRpb25zIiBvbmNoYW5nZT0iZmlsdGVyWm9uZXMyKCkiPg0KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJub25lIj4oU0VMRUNUIFRBRyk8L29wdGlvbj4NCiAgICAgICAgICAgICAgICA8L3NlbGVjdD4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29udHJvbC1idXR0b25zIj4NCiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJyZWZyZXNoIiBjbGFzcz0iY29udHJvbC1idXR0b24iIHRpdGxlPSJSZWZyZXNoIGFsbCB0aGUgem9uZXMiIG9uY2xpY2s9Imxpc3Rab25lcygpIj4NCiAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9InJlZnJlc2gtaWNvbi5wbmciIGFsdD0icmVmcmVzaCI+DQogICAgICAgICAgICAgICAgPC9idXR0b24+DQoNCiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJzZXR0aW5ncyIgY2xhc3M9ImNvbnRyb2wtYnV0dG9uIiB0aXRsZT0iU2V0dGluZ3MhIj4NCiAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9InNldHRpbmcucG5nIiBhbHQ9InNldHRpbmdzIj4NCiAgICAgICAgICAgICAgICA8L2J1dHRvbj4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICA8L2Rpdj4NCiAgICA8L2hlYWRlcj4NCgk8bWFpbj4NCiAgICA8ZGl2IHN0eWxlPSJoZWlnaHQ6OTBweDsgcG9zaXRpb246c3RpY2t5OyI+DQo8L2Rpdj4NCiAgICA8YnI+DQogICAgICAgIDxkZXRhaWxzIGlkPSJmZWF0dXJlZFpvbmVzV3JhcHBlciIgb3Blbj4NCiAgICAgICAgICAgIDxzdW1tYXJ5IGlkPSJhbGxab25lc1N1bW1hcnkiIHN0eWxlPSJmb250LXNpemU6IDEuMnJlbTsgZm9udC13ZWlnaHQ6IGJvbGQ7IGN1cnNvcjogcG9pbnRlcjsiPkZlYXR1cmVkIFpvbmVzPC9zdW1tYXJ5Pg0KICAgICAgICAgICAgPGRpdiBpZD0iZmVhdHVyZWRab25lcyIgY2xhc3M9InpvbmUtY29udGFpbmVyIj48L2Rpdj4NCiAgICAgICAgPC9kZXRhaWxzPg0KICAgICAgICA8YnI+PGhyPjxicj4NCiAgICAgICAgPGRldGFpbHMgaWQ9ImFsbFpvbmVzV3JhcHBlciIgb3Blbj4NCiAgICAgICAgICAgIDxzdW1tYXJ5IGlkPSJhbGxTdW1tYXJ5IiBzdHlsZT0iZm9udC1zaXplOiAxLjJyZW07IGZvbnQtd2VpZ2h0OiBib2xkOyBjdXJzb3I6IHBvaW50ZXI7Ij5BbGwgWm9uZXM8L3N1bW1hcnk+DQogICAgICAgICAgICA8ZGl2IGlkPSJjb250YWluZXIiPkxvYWRpbmcuLi48L2Rpdj4NCiAgICAgICAgPC9kZXRhaWxzPg0KICAgIDwvbWFpbj4NCg0KICAgICA8ZGl2IGlkPSJ6b25lVmlld2VyIj4NCiAgICAgICAgPGRpdiBjbGFzcz0iem9uZS1oZWFkZXIiPg0KICAgICAgICAgICAgPGRpdiBjbGFzcz0iem9uZS10aXRsZSI+DQogICAgICAgICAgICAgICAgPGgyIGlkPSJ6b25lTmFtZSI+em9uZTwvaDI+DQogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iaW5mby1idXR0b24iIG9uY2xpY2s9InNob3dab25lSW5mbygpIiB0aXRsZT0iWm9uZSBJbmZvcm1hdGlvbiI+DQogICAgICAgICAgICAgICAgICAgIDxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjEwIj48L2NpcmNsZT4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxsaW5lIHgxPSIxMiIgeTE9IjE2IiB4Mj0iMTIiIHkyPSIxMiI+PC9saW5lPg0KICAgICAgICAgICAgICAgICAgICAgICAgPGxpbmUgeDE9IjEyIiB5MT0iOCIgeDI9IjEyLjAxIiB5Mj0iOCI+PC9saW5lPg0KICAgICAgICAgICAgICAgICAgICA8L3N2Zz4NCiAgICAgICAgICAgICAgICA8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICA8c3BhbiBpZD0iem9uZUlkIiBzdHlsZT0iZGlzcGxheTogbm9uZTsiPjwvc3Bhbj4NCiAgICAgICAgICAgICAgICA8YSBpZD0iem9uZUF1dGhvciIgaHJlZj0iIyIgdGFyZ2V0PSJfYmxhbmsiPmJ5IEF1dGhvcjwvYT4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgPGRpdiBjbGFzcz0iem9uZS1jb250cm9scyI+DQogICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJmdWxsc2NyZWVuWm9uZSgpIj5GdWxsc2NyZWVuPC9idXR0b24+DQogICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJhYm91dEJsYW5rKCkiPk9wZW4gaW4gTmV3IFRhYjwvYnV0dG9uPg0KICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0iZG93bmxvYWRab25lKCkiPkRvd25sb2FkPC9idXR0b24+DQogICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJjbG9zZVpvbmUoKSI+Q2xvc2U8L2J1dHRvbj4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICA8L2Rpdj4NCiAgICAgICAgPGlmcmFtZSBpZD0iem9uZUZyYW1lIj48L2lmcmFtZT4NCiAgICA8L2Rpdj4NCg0KICAgIDxkaXYgaWQ9InBvcHVwT3ZlcmxheSI+DQogICAgICAgIDxkaXYgY2xhc3M9InBvcHVwIj4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9InBvcHVwLWhlYWRlciI+DQogICAgICAgICAgICAgICAgPGgzIGlkPSJwb3B1cFRpdGxlIj5UaXRsZTwvaDM+DQogICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD0icG9wdXBDbG9zZSIgb25jbGljaz0iY2xvc2VQb3B1cCgpIj7DlzwvYnV0dG9uPg0KICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICA8ZGl2IGlkPSJwb3B1cEJvZHkiPg0KICAgICAgICAgICAgICAgIENvbnRlbnQgd2lsbCBiZSBoZXJlDQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgPC9kaXY+DQogICAgPC9kaXY+DQoNCiAgICA8ZGl2IGNsYXNzPSJmb290ZXItbGlua3MiPg0KICAgICAgICAgICAgPGEgaHJlZj0iIyIgb25jbGljaz0ibG9hZERNQ0EoKTsgcmV0dXJuIGZhbHNlOyI+RE1DQTwvYT4NCiAgICAgICAgICAgIDxhIGhyZWY9IiMiIG9uY2xpY2s9InNob3dDb250YWN0KCk7IHJldHVybiBmYWxzZTsiPkNvbnRhY3Q8L2E+DQogICAgICAgICAgICA8YSBocmVmPSIjIiBvbmNsaWNrPSJsb2FkUHJpdmFjeSgpOyByZXR1cm4gZmFsc2U7Ij5Qcml2YWN5IFBvbGljeTwvYT4NCiAgICAgICAgICAgIDxhIGhyZWY9ImphdmFzY3JpcHQ6c2F2ZURhdGEoKSI+RXhwb3J0IERhdGE8L2E+DQogICAgICAgICAgICA8YSBocmVmPSIjIiBvbmNsaWNrPSJkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW1wb3J0RGF0YScpLmNsaWNrKCk7IHJldHVybiBmYWxzZTsiPkltcG9ydCBEYXRhPC9hPg0KICAgICAgICAgICAgPGlucHV0IHR5cGU9ImZpbGUiIGlkPSJpbXBvcnREYXRhIiBzdHlsZT0iZGlzcGxheTogbm9uZTsiIG9uY2hhbmdlPSJsb2FkRGF0YShldmVudCkiPg0KICAgICAgICA8L2Rpdj4NCiAgICA8L2Zvb3Rlcj4NCg0KICAgIDxzY3JpcHQ+DQpjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udGFpbmVyJyk7DQpjb25zdCB6b25lVmlld2VyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3pvbmVWaWV3ZXInKTsNCmxldCB6b25lRnJhbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnem9uZUZyYW1lJyk7DQpjb25zdCBzZWFyY2hCYXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VhcmNoQmFyJyk7DQpjb25zdCBzb3J0T3B0aW9ucyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzb3J0T3B0aW9ucycpOw0KY29uc3QgZmlsdGVyT3B0aW9ucyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWx0ZXJPcHRpb25zJyk7DQovLyBodHRwczovL3d3dy5qc2RlbGl2ci5jb20vdG9vbHMvcHVyZ2UNCmNvbnN0IHpvbmVzdXJscyA9IFsNCiAgICAiaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0LyU2NyU2OC8lNjclNmUlMmQlNmQlNjElNzQlNjgvJTYxJTczJTczJTY1JTc0JTczQCU2ZCU2MSU2OSU2ZS8lN2ElNmYlNmUlNjUlNzMlMmUlNmElNzMlNmYlNmUiLA0KICAgICJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvZ2gvZ24tbWF0aC9hc3NldHNAbGF0ZXN0L3pvbmVzLmpzb24iLA0KICAgICJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvZ2gvZ24tbWF0aC9hc3NldHNAbWFzdGVyL3pvbmVzLmpzb24iLA0KICAgICJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvZ2gvZ24tbWF0aC9hc3NldHMvem9uZXMuanNvbiINCl07DQpsZXQgem9uZXNVUkwgPSB6b25lc3VybHNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogem9uZXN1cmxzLmxlbmd0aCldOw0KY29uc3QgY292ZXJVUkwgPSAiaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L2doL2duLW1hdGgvY292ZXJzQG1haW4iOw0KY29uc3QgaHRtbFVSTCA9ICJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvZ2gvZ24tbWF0aC9odG1sQG1haW4iOw0KbGV0IHpvbmVzID0gW107DQpsZXQgcG9wdWxhcml0eURhdGEgPSB7fTsNCmNvbnN0IGZlYXR1cmVkQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZlYXR1cmVkWm9uZXMnKTsNCmZ1bmN0aW9uIHRvVGl0bGVDYXNlKHN0cikgew0KICByZXR1cm4gc3RyLnJlcGxhY2UoDQogICAgL1x3XFMqL2csDQogICAgdGV4dCA9PiB0ZXh0LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgdGV4dC5zdWJzdHJpbmcoMSkudG9Mb3dlckNhc2UoKQ0KICApOw0KfQ0KYXN5bmMgZnVuY3Rpb24gbGlzdFpvbmVzKCkgew0KICAgIHRyeSB7DQogICAgICBsZXQgc2hhcmVzcG9uc2U7DQogICAgICBsZXQgc2hhanNvbjsNCiAgICAgIGxldCBzaGE7DQogICAgICAgIHRyeSB7DQogICAgICAgICAgc2hhcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgiaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS9yZXBvcy9nbi1tYXRoL2Fzc2V0cy9jb21taXRzP3Q9IitEYXRlLm5vdygpKTsNCiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHt9DQogICAgICAgIGlmIChzaGFyZXNwb25zZSAmJiBzaGFyZXNwb25zZS5zdGF0dXMgPT09IDIwMCkgew0KICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICBzaGFqc29uID0gYXdhaXQgc2hhcmVzcG9uc2UuanNvbigpOw0KICAgICAgICAgICAgc2hhID0gc2hhanNvblswXVsnc2hhJ107DQogICAgICAgICAgICBpZiAoc2hhKSB7DQogICAgICAgICAgICAgICAgem9uZXNVUkwgPSBgaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L2doL2duLW1hdGgvYXNzZXRzQCR7c2hhfS96b25lcy5qc29uYDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9IGNhdGNoIChlcnJvcikgew0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBsZXQgc2Vjb25kYXJ5c2hhcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgiaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2duLW1hdGgveG1sL3JlZnMvaGVhZHMvbWFpbi9zaGEudHh0P3Q9IitEYXRlLm5vdygpKTsNCiAgICAgICAgICAgICAgICBpZiAoc2Vjb25kYXJ5c2hhcmVzcG9uc2UgJiYgc2Vjb25kYXJ5c2hhcmVzcG9uc2Uuc3RhdHVzID09PSAyMDApIHsNCiAgICAgICAgICAgICAgICAgICAgc2hhID0gKGF3YWl0IHNlY29uZGFyeXNoYXJlc3BvbnNlLnRleHQoKSkudHJpbSgpOw0KICAgICAgICAgICAgICAgICAgICBpZiAoc2hhKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB6b25lc1VSTCA9IGBodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvZ2gvZ24tbWF0aC9hc3NldHNAJHtzaGF9L3pvbmVzLmpzb25gOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSBjYXRjaChlcnJvcikge30NCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh6b25lc1VSTCsiP3Q9IitEYXRlLm5vdygpKTsNCiAgICAgICAgY29uc3QganNvbiA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTsNCiAgICAgICAgem9uZXMgPSBqc29uOw0KICAgICAgICB6b25lc1swXS5mZWF0dXJlZCA9IHRydWU7IC8vIGFsd2F5cyBnb25uYSBiZSB0aGUgZGlzY29yZA0KICAgICAgICBhd2FpdCBmZXRjaFBvcHVsYXJpdHkoKTsNCiAgICAgICAgc29ydFpvbmVzKCk7DQogICAgICAgIHRyeSB7DQogICAgICAgIGNvbnN0IHNlYXJjaCA9IG5ldyBVUkxTZWFyY2hQYXJhbXMod2luZG93LmxvY2F0aW9uLnNlYXJjaCk7DQogICAgICAgIGNvbnN0IGlkID0gc2VhcmNoLmdldCgnaWQnKTsNCiAgICAgICAgY29uc3QgZW1iZWQgPSB3aW5kb3cubG9jYXRpb24uaGFzaC5pbmNsdWRlcygiZW1iZWQiKTsNCiAgICAgICAgaWYgKGlkKSB7DQogICAgICAgICAgICBjb25zdCB6b25lID0gem9uZXMuZmluZCh6b25lID0+IHpvbmUuaWQgKyAnJyA9PSBpZCArICcnKTsNCiAgICAgICAgICAgIGlmICh6b25lKSB7DQogICAgICAgICAgICAgICAgaWYgKGVtYmVkKSB7DQogICAgICAgICAgICAgICAgICAgIGlmICh6b25lLnVybC5zdGFydHNXaXRoKCJodHRwIikpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5vcGVuKHpvbmUudXJsLCAiX2JsYW5rIik7DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1cmwgPSB6b25lLnVybC5yZXBsYWNlKCJ7Q09WRVJfVVJMfSIsIGNvdmVyVVJMKS5yZXBsYWNlKCJ7SFRNTF9VUkx9IiwgaHRtbFVSTCk7DQogICAgICAgICAgICAgICAgICAgICAgICBmZXRjaCh1cmwrIj90PSIrRGF0ZS5ub3coKSkudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS50ZXh0KCkpLnRoZW4oaHRtbCA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmlubmVySFRNTCA9IGh0bWw7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcG9wdXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3B1cC5zdHlsZS5wb3NpdGlvbiA9ICJmaXhlZCI7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9wdXAuc3R5bGUuYm90dG9tID0gIjIwcHgiOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvcHVwLnN0eWxlLnJpZ2h0ID0gIjIwcHgiOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvcHVwLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICIjY2NlNWZmIjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3B1cC5zdHlsZS5jb2xvciA9ICIjMDA0MDg1IjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3B1cC5zdHlsZS5wYWRkaW5nID0gIjEwcHgiOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvcHVwLnN0eWxlLmJvcmRlciA9ICIxcHggc29saWQgI2I4ZGFmZiI7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9wdXAuc3R5bGUuYm9yZGVyUmFkaXVzID0gIjVweCI7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9wdXAuc3R5bGUuYm94U2hhZG93ID0gIjBweCAwcHggMTBweCByZ2JhKDAsMCwwLDAuMSkiOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvcHVwLnN0eWxlLmZvbnRGYW1pbHkgPSAiQXJpYWwsIHNhbnMtc2VyaWYiOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvcHVwLmlubmVySFRNTCA9IGBQbGF5IG1vcmUgZ2FtZXMgYXQgPGEgaHJlZj0iaHR0cHM6Ly9nbi1tYXRoLmdpdGh1Yi5pbyIgdGFyZ2V0PSJfYmxhbmsiIHN0eWxlPSJjb2xvcjojMDA0MDg1OyBmb250LXdlaWdodDpib2xkOyI+aHR0cHM6Ly9nbi1tYXRoLmdpdGh1Yi5pbzwvYT4hYDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjbG9zZUJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImJ1dHRvbiIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsb3NlQnRuLmlubmVyVGV4dCA9ICI/IjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbG9zZUJ0bi5zdHlsZS5tYXJnaW5MZWZ0ID0gIjEwcHgiOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsb3NlQnRuLnN0eWxlLmJhY2tncm91bmQgPSAibm9uZSI7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xvc2VCdG4uc3R5bGUuYm9yZGVyID0gIm5vbmUiOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsb3NlQnRuLnN0eWxlLmN1cnNvciA9ICJwb2ludGVyIjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbG9zZUJ0bi5zdHlsZS5jb2xvciA9ICIjMDA0MDg1IjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbG9zZUJ0bi5zdHlsZS5mb250V2VpZ2h0ID0gImJvbGQiOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsb3NlQnRuLm9uY2xpY2sgPSAoKSA9PiBwb3B1cC5yZW1vdmUoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3B1cC5hcHBlbmRDaGlsZChjbG9zZUJ0bik7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChwb3B1cCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ3NjcmlwdCcpLmZvckVhY2gob2xkU2NyaXB0ID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3U2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvbGRTY3JpcHQuc3JjKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdTY3JpcHQuc3JjID0gb2xkU2NyaXB0LnNyYzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1NjcmlwdC50ZXh0Q29udGVudCA9IG9sZFNjcmlwdC50ZXh0Q29udGVudDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG5ld1NjcmlwdCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaChlcnJvciA9PiBhbGVydCgiRmFpbGVkIHRvIGxvYWQgem9uZTogIiArIGVycm9yKSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBvcGVuWm9uZSh6b25lKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgfSBjYXRjaChlcnJvcil7fQ0KICAgICAgICBsZXQgYWxsdGFncyA9IFtdOw0KICAgICAgICBmb3IgKGNvbnN0IG9iaiBvZiBqc29uKSB7DQogICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShvYmouc3BlY2lhbCkpIHsNCiAgICAgICAgICAgICAgICBhbGx0YWdzLnB1c2goLi4ub2JqLnNwZWNpYWwpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgYWxsdGFncyA9IFsuLi5uZXcgU2V0KGFsbHRhZ3MpXTsNCiAgICAgICAgbGV0IGZpbHRlcm9wdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJmaWx0ZXJPcHRpb25zIik7DQogICAgICAgIGlmIChmaWx0ZXJvcHRpb24gJiYgZmlsdGVyb3B0aW9uLmNoaWxkcmVuLmxlbmd0aCA+IDEpIHsNCiAgICAgICAgICAgIHdoaWxlIChmaWx0ZXJvcHRpb24uY2hpbGRyZW4ubGVuZ3RoID4gMSkgew0KICAgICAgICAgICAgICAgIGZpbHRlcm9wdGlvbi5yZW1vdmVDaGlsZChmaWx0ZXJvcHRpb24ubGFzdEVsZW1lbnRDaGlsZCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgZm9yIChjb25zdCB0YWcgb2YgYWxsdGFncykgew0KICAgICAgICAgICAgY29uc3Qgb3B0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgib3B0aW9uIik7DQogICAgICAgICAgICBvcHQudmFsdWUgPSB0YWc7DQogICAgICAgICAgICBvcHQudGV4dENvbnRlbnQgPSB0b1RpdGxlQ2FzZSh0YWcpOw0KICAgICAgICAgICAgZmlsdGVyb3B0aW9uLmFwcGVuZENoaWxkKG9wdCk7DQogICAgICAgIH0NCiAgICB9IGNhdGNoIChlcnJvcikgew0KICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTsNCiAgICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9IGBFcnJvciBsb2FkaW5nIHpvbmVzOiAke2Vycm9yfWA7DQogICAgfQ0KfQ0KYXN5bmMgZnVuY3Rpb24gZmV0Y2hQb3B1bGFyaXR5KCkgew0KICAgIHRyeSB7DQogICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goImh0dHBzOi8vZGF0YS5qc2RlbGl2ci5jb20vdjEvc3RhdHMvcGFja2FnZXMvZ2gvZ24tbWF0aC9odG1sQG1haW4vZmlsZXM/cGVyaW9kPXllYXIiKTsNCiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTsNCiAgICAgICAgZGF0YS5mb3JFYWNoKGZpbGUgPT4gew0KICAgICAgICAgICAgY29uc3QgaWRNYXRjaCA9IGZpbGUubmFtZS5tYXRjaCgvXC8oXGQrKVwuaHRtbCQvKTsNCiAgICAgICAgICAgIGlmIChpZE1hdGNoKSB7DQogICAgICAgICAgICAgICAgY29uc3QgaWQgPSBwYXJzZUludChpZE1hdGNoWzFdKTsNCiAgICAgICAgICAgICAgICBwb3B1bGFyaXR5RGF0YVtpZF0gPSBmaWxlLmhpdHMudG90YWw7DQogICAgICAgICAgICB9DQogICAgICAgIH0pOw0KICAgIH0gY2F0Y2ggKGVycm9yKSB7DQogICAgICAgIHBvcHVsYXJpdHlEYXRhWzBdID0gMDsNCiAgICB9DQp9DQoNCmZ1bmN0aW9uIHNvcnRab25lcygpIHsNCiAgICBjb25zdCBzb3J0QnkgPSBzb3J0T3B0aW9ucy52YWx1ZTsNCiAgICBpZiAoc29ydEJ5ID09PSAnbmFtZScpIHsNCiAgICAgICAgem9uZXMuc29ydCgoYSwgYikgPT4gYS5uYW1lLmxvY2FsZUNvbXBhcmUoYi5uYW1lKSk7DQogICAgfSBlbHNlIGlmIChzb3J0QnkgPT09ICdpZCcpIHsNCiAgICAgICAgem9uZXMuc29ydCgoYSwgYikgPT4gYS5pZCAtIGIuaWQpOw0KICAgIH0gZWxzZSBpZiAoc29ydEJ5ID09PSAncG9wdWxhcicpIHsNCiAgICAgICAgem9uZXMuc29ydCgoYSwgYikgPT4gKHBvcHVsYXJpdHlEYXRhW2IuaWRdIHx8IDApIC0gKHBvcHVsYXJpdHlEYXRhW2EuaWRdIHx8IDApKTsNCiAgICB9DQogICAgem9uZXMuc29ydCgoYSwgYikgPT4gKGEuaWQgPT09IC0xID8gLTEgOiBiLmlkID09PSAtMSA/IDEgOiAwKSk7DQogICAgaWYgKGZlYXR1cmVkQ29udGFpbmVyLmlubmVySFRNTCA9PT0gIiIpIHsNCiAgICAgICAgY29uc3QgZmVhdHVyZWQgPSB6b25lcy5maWx0ZXIoeiA9PiB6LmZlYXR1cmVkKTsNCiAgICAgICAgZGlzcGxheUZlYXR1cmVkWm9uZXMoZmVhdHVyZWQpOw0KICAgIH0NCiAgICBkaXNwbGF5Wm9uZXMoem9uZXMpOw0KfQ0KDQpmdW5jdGlvbiBkaXNwbGF5RmVhdHVyZWRab25lcyhmZWF0dXJlZFpvbmVzKSB7DQogICAgZmVhdHVyZWRDb250YWluZXIuaW5uZXJIVE1MID0gIiI7DQogICAgZmVhdHVyZWRab25lcy5mb3JFYWNoKChmaWxlLCBpbmRleCkgPT4gew0KICAgICAgICBjb25zdCB6b25lSXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOw0KICAgICAgICB6b25lSXRlbS5jbGFzc05hbWUgPSAiem9uZS1pdGVtIjsNCiAgICAgICAgem9uZUl0ZW0ub25jbGljayA9ICgpID0+IG9wZW5ab25lKGZpbGUpOw0KICAgICAgICBjb25zdCBpbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbWciKTsNCiAgICAgICAgaW1nLmRhdGFzZXQuc3JjID0gZmlsZS5jb3Zlci5yZXBsYWNlKCJ7Q09WRVJfVVJMfSIsIGNvdmVyVVJMKS5yZXBsYWNlKCJ7SFRNTF9VUkx9IiwgaHRtbFVSTCk7DQogICAgICAgIGltZy5hbHQgPSBmaWxlLm5hbWU7DQogICAgICAgIGltZy5sb2FkaW5nID0gImxhenkiOw0KICAgICAgICBpbWcuY2xhc3NOYW1lID0gImxhenktem9uZS1pbWciOw0KICAgICAgICB6b25lSXRlbS5hcHBlbmRDaGlsZChpbWcpOw0KICAgICAgICBjb25zdCBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJidXR0b24iKTsNCiAgICAgICAgYnV0dG9uLnRleHRDb250ZW50ID0gZmlsZS5uYW1lOw0KICAgICAgICBidXR0b24ub25jbGljayA9IChldmVudCkgPT4gew0KICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7DQogICAgICAgICAgICBvcGVuWm9uZShmaWxlKTsNCiAgICAgICAgfTsNCiAgICAgICAgem9uZUl0ZW0uYXBwZW5kQ2hpbGQoYnV0dG9uKTsNCiAgICAgICAgZmVhdHVyZWRDb250YWluZXIuYXBwZW5kQ2hpbGQoem9uZUl0ZW0pOw0KICAgIH0pOw0KICAgIGlmIChmZWF0dXJlZENvbnRhaW5lci5pbm5lckhUTUwgPT09ICIiKSB7DQogICAgICAgIGZlYXR1cmVkQ29udGFpbmVyLmlubmVySFRNTCA9ICJObyBmZWF0dXJlZCB6b25lcyBmb3VuZC4iOw0KICAgIH0gZWxzZSB7DQogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJhbGxab25lc1N1bW1hcnkiKS50ZXh0Q29udGVudCA9IGBGZWF0dXJlZCBab25lcyAoJHtmZWF0dXJlZFpvbmVzLmxlbmd0aH0pYDsNCiAgICB9DQoNCiAgICBjb25zdCBsYXp5SW1hZ2VzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnI2ZlYXR1cmVkWm9uZXMgaW1nLmxhenktem9uZS1pbWcnKTsNCiAgICBjb25zdCBpbWFnZU9ic2VydmVyID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKChlbnRyaWVzLCBvYnNlcnZlcikgPT4gew0KICAgICAgICBlbnRyaWVzLmZvckVhY2goZW50cnkgPT4gew0KICAgICAgICAgICAgaWYgKGVudHJ5LmlzSW50ZXJzZWN0aW5nICYmICF6b25lVmlld2VyLmhpZGRlbikgew0KICAgICAgICAgICAgICAgIGNvbnN0IGltZyA9IGVudHJ5LnRhcmdldDsNCiAgICAgICAgICAgICAgICBpbWcuc3JjID0gaW1nLmRhdGFzZXQuc3JjOw0KICAgICAgICAgICAgICAgIGltZy5jbGFzc0xpc3QucmVtb3ZlKCJsYXp5LXpvbmUtaW1nIik7DQogICAgICAgICAgICAgICAgb2JzZXJ2ZXIudW5vYnNlcnZlKGltZyk7DQogICAgICAgICAgICB9DQogICAgICAgIH0pOw0KICAgIH0sIHsNCiAgICAgICAgcm9vdE1hcmdpbjogIjEwMHB4IiwgDQogICAgICAgIHRocmVzaG9sZDogMC4xDQogICAgfSk7DQoNCiAgICBsYXp5SW1hZ2VzLmZvckVhY2goaW1nID0+IHsNCiAgICAgICAgaW1hZ2VPYnNlcnZlci5vYnNlcnZlKGltZyk7DQogICAgfSk7DQp9DQpmdW5jdGlvbiBkaXNwbGF5Wm9uZXMoem9uZXMpIHsNCiAgICBjb250YWluZXIuaW5uZXJIVE1MID0gIiI7DQogICAgem9uZXMuZm9yRWFjaCgoZmlsZSwgaW5kZXgpID0+IHsNCiAgICAgICAgY29uc3Qgem9uZUl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsNCiAgICAgICAgem9uZUl0ZW0uY2xhc3NOYW1lID0gInpvbmUtaXRlbSI7DQogICAgICAgIHpvbmVJdGVtLm9uY2xpY2sgPSAoKSA9PiBvcGVuWm9uZShmaWxlKTsNCiAgICAgICAgY29uc3QgaW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW1nIik7DQogICAgICAgIGltZy5kYXRhc2V0LnNyYyA9IGZpbGUuY292ZXIucmVwbGFjZSgie0NPVkVSX1VSTH0iLCBjb3ZlclVSTCkucmVwbGFjZSgie0hUTUxfVVJMfSIsIGh0bWxVUkwpOw0KICAgICAgICBpbWcuYWx0ID0gZmlsZS5uYW1lOw0KICAgICAgICBpbWcubG9hZGluZyA9ICJsYXp5IjsNCiAgICAgICAgaW1nLmNsYXNzTmFtZSA9ICJsYXp5LXpvbmUtaW1nIjsNCiAgICAgICAgem9uZUl0ZW0uYXBwZW5kQ2hpbGQoaW1nKTsNCiAgICAgICAgY29uc3QgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYnV0dG9uIik7DQogICAgICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9IGZpbGUubmFtZTsNCiAgICAgICAgYnV0dG9uLm9uY2xpY2sgPSAoZXZlbnQpID0+IHsNCiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOw0KICAgICAgICAgICAgb3BlblpvbmUoZmlsZSk7DQogICAgICAgIH07DQogICAgICAgIHpvbmVJdGVtLmFwcGVuZENoaWxkKGJ1dHRvbik7DQogICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh6b25lSXRlbSk7ICAgDQogICAgfSk7DQogICAgaWYgKGNvbnRhaW5lci5pbm5lckhUTUwgPT09ICIiKSB7DQogICAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSAiTm8gem9uZXMgZm91bmQuIjsNCiAgICB9IGVsc2Ugew0KICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiYWxsU3VtbWFyeSIpLnRleHRDb250ZW50ID0gYEFsbCBab25lcyAoJHt6b25lcy5sZW5ndGh9KWA7DQogICAgfQ0KDQogICAgY29uc3QgbGF6eUltYWdlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2ltZy5sYXp5LXpvbmUtaW1nJyk7DQogICAgY29uc3QgaW1hZ2VPYnNlcnZlciA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcigoZW50cmllcywgb2JzZXJ2ZXIpID0+IHsNCiAgICAgICAgZW50cmllcy5mb3JFYWNoKGVudHJ5ID0+IHsNCiAgICAgICAgICAgIGlmIChlbnRyeS5pc0ludGVyc2VjdGluZyAmJiAhem9uZVZpZXdlci5oaWRkZW4pIHsNCiAgICAgICAgICAgICAgICBjb25zdCBpbWcgPSBlbnRyeS50YXJnZXQ7DQogICAgICAgICAgICAgICAgaW1nLnNyYyA9IGltZy5kYXRhc2V0LnNyYzsNCiAgICAgICAgICAgICAgICBpbWcuY2xhc3NMaXN0LnJlbW92ZSgibGF6eS16b25lLWltZyIpOw0KICAgICAgICAgICAgICAgIG9ic2VydmVyLnVub2JzZXJ2ZShpbWcpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICB9LCB7DQogICAgICAgIHJvb3RNYXJnaW46ICIxMDBweCIsIA0KICAgICAgICB0aHJlc2hvbGQ6IDAuMQ0KICAgIH0pOw0KDQogICAgbGF6eUltYWdlcy5mb3JFYWNoKGltZyA9PiB7DQogICAgICAgIGltYWdlT2JzZXJ2ZXIub2JzZXJ2ZShpbWcpOw0KICAgIH0pOw0KfQ0KDQpmdW5jdGlvbiBmaWx0ZXJab25lczIoKSB7DQogICAgY29uc3QgcXVlcnkgPSBmaWx0ZXJPcHRpb25zLnZhbHVlOw0KICAgIGlmIChxdWVyeSA9PT0gIm5vbmUiKSB7DQogICAgICAgIGRpc3BsYXlab25lcyh6b25lcyk7DQogICAgfSBlbHNlIHsNCiAgICAgICAgY29uc3QgZmlsdGVyZWRab25lcyA9IHpvbmVzLmZpbHRlcih6b25lID0+IHpvbmUuc3BlY2lhbD8uaW5jbHVkZXMocXVlcnkpKTsNCiAgICAgICAgaWYgKHF1ZXJ5Lmxlbmd0aCAhPT0gMCkgew0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImZlYXR1cmVkWm9uZXNXcmFwcGVyIikucmVtb3ZlQXR0cmlidXRlKCJvcGVuIik7DQogICAgICAgIH0NCiAgICAgICAgZGlzcGxheVpvbmVzKGZpbHRlcmVkWm9uZXMpOw0KICAgIH0NCn0NCg0KZnVuY3Rpb24gZmlsdGVyWm9uZXMoKSB7DQogICAgY29uc3QgcXVlcnkgPSBzZWFyY2hCYXIudmFsdWUudG9Mb3dlckNhc2UoKTsNCiAgICBjb25zdCBmaWx0ZXJlZFpvbmVzID0gem9uZXMuZmlsdGVyKHpvbmUgPT4gem9uZS5uYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocXVlcnkpKTsNCiAgICBpZiAocXVlcnkubGVuZ3RoICE9PSAwKSB7DQogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJmZWF0dXJlZFpvbmVzV3JhcHBlciIpLnJlbW92ZUF0dHJpYnV0ZSgib3BlbiIpOw0KICAgIH0NCiAgICBkaXNwbGF5Wm9uZXMoZmlsdGVyZWRab25lcyk7DQp9DQoNCmZ1bmN0aW9uIG9wZW5ab25lKGZpbGUpIHsNCiAgICBpZiAoZmlsZS51cmwuc3RhcnRzV2l0aCgiaHR0cCIpKSB7DQogICAgICAgIHdpbmRvdy5vcGVuKGZpbGUudXJsLCAiX2JsYW5rIik7DQogICAgfSBlbHNlIHsNCiAgICAgICAgY29uc3QgdXJsID0gZmlsZS51cmwucmVwbGFjZSgie0NPVkVSX1VSTH0iLCBjb3ZlclVSTCkucmVwbGFjZSgie0hUTUxfVVJMfSIsIGh0bWxVUkwpOw0KICAgICAgICBmZXRjaCh1cmwrIj90PSIrRGF0ZS5ub3coKSkudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS50ZXh0KCkpLnRoZW4oaHRtbCA9PiB7DQogICAgICAgICAgICBpZiAoem9uZUZyYW1lLmNvbnRlbnREb2N1bWVudCA9PT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIHpvbmVGcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlmcmFtZSIpOw0KICAgICAgICAgICAgICAgIHpvbmVGcmFtZS5pZCA9ICJ6b25lRnJhbWUiOw0KICAgICAgICAgICAgICAgIHpvbmVWaWV3ZXIuYXBwZW5kQ2hpbGQoem9uZUZyYW1lKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHpvbmVGcmFtZS5jb250ZW50RG9jdW1lbnQub3BlbigpOw0KICAgICAgICAgICAgem9uZUZyYW1lLmNvbnRlbnREb2N1bWVudC53cml0ZShodG1sKTsNCiAgICAgICAgICAgIHpvbmVGcmFtZS5jb250ZW50RG9jdW1lbnQuY2xvc2UoKTsNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd6b25lTmFtZScpLnRleHRDb250ZW50ID0gZmlsZS5uYW1lOw0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3pvbmVJZCcpLnRleHRDb250ZW50ID0gZmlsZS5pZDsNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd6b25lQXV0aG9yJykudGV4dENvbnRlbnQgPSAiYnkgIiArIGZpbGUuYXV0aG9yOw0KICAgICAgICAgICAgaWYgKGZpbGUuYXV0aG9yTGluaykgew0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd6b25lQXV0aG9yJykuaHJlZiA9IGZpbGUuYXV0aG9yTGluazsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHpvbmVWaWV3ZXIuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgY29uc3QgdXJsID0gbmV3IFVSTCh3aW5kb3cubG9jYXRpb24pOw0KICAgICAgICAgICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ2lkJywgZmlsZS5pZCk7DQogICAgICAgICAgICBoaXN0b3J5LnB1c2hTdGF0ZShudWxsLCAnJywgdXJsLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgfSBjYXRjaChlcnJvcil7fQ0KICAgICAgICAgICAgem9uZVZpZXdlci5oaWRkZW4gPSB0cnVlOw0KICAgICAgICB9KS5jYXRjaChlcnJvciA9PiBhbGVydCgiRmFpbGVkIHRvIGxvYWQgem9uZTogIiArIGVycm9yKSk7DQogICAgfQ0KfQ0KDQpmdW5jdGlvbiBhYm91dEJsYW5rKCkgew0KICAgIGNvbnN0IG5ld1dpbmRvdyA9IHdpbmRvdy5vcGVuKCJhYm91dDpibGFuayIsICJfYmxhbmsiKTsNCiAgICBsZXQgem9uZSA9IHpvbmVzLmZpbmQoem9uZSA9PiB6b25lLmlkICsgJycgPT09IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd6b25lSWQnKS50ZXh0Q29udGVudCkudXJsLnJlcGxhY2UoIntDT1ZFUl9VUkx9IiwgY292ZXJVUkwpLnJlcGxhY2UoIntIVE1MX1VSTH0iLCBodG1sVVJMKTsNCiAgICBmZXRjaCh6b25lKyI/dD0iK0RhdGUubm93KCkpLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UudGV4dCgpKS50aGVuKGh0bWwgPT4gew0KICAgICAgICBpZiAobmV3V2luZG93KSB7DQogICAgICAgICAgICBuZXdXaW5kb3cuZG9jdW1lbnQub3BlbigpOw0KICAgICAgICAgICAgbmV3V2luZG93LmRvY3VtZW50LndyaXRlKGh0bWwpOw0KICAgICAgICAgICAgbmV3V2luZG93LmRvY3VtZW50LmNsb3NlKCk7DQogICAgICAgIH0NCiAgICB9KQ0KfQ0KDQpmdW5jdGlvbiBjbG9zZVpvbmUoKSB7DQogICAgem9uZVZpZXdlci5oaWRkZW4gPSBmYWxzZTsNCiAgICB6b25lVmlld2VyLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7DQogICAgem9uZVZpZXdlci5yZW1vdmVDaGlsZCh6b25lRnJhbWUpOw0KICAgIHRyeSB7DQogICAgY29uc3QgdXJsID0gbmV3IFVSTCh3aW5kb3cubG9jYXRpb24pOw0KICAgIHVybC5zZWFyY2hQYXJhbXMuZGVsZXRlKCdpZCcpOw0KICAgIGhpc3RvcnkucHVzaFN0YXRlKG51bGwsICcnLCB1cmwudG9TdHJpbmcoKSk7DQogICAgfSBjYXRjaChlcnJvcil7fQ0KfQ0KDQpmdW5jdGlvbiBkb3dubG9hZFpvbmUoKSB7DQogICAgbGV0IHpvbmUgPSB6b25lcy5maW5kKHpvbmUgPT4gem9uZS5pZCArICcnID09PSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnem9uZUlkJykudGV4dENvbnRlbnQpOw0KICAgIGZldGNoKHpvbmUudXJsLnJlcGxhY2UoIntIVE1MX1VSTH0iLCBodG1sVVJMKSsiP3Q9IitEYXRlLm5vdygpKS50aGVuKHJlcyA9PiByZXMudGV4dCgpKS50aGVuKHRleHQgPT4gew0KICAgICAgICBjb25zdCBibG9iID0gbmV3IEJsb2IoW3RleHRdLCB7DQogICAgICAgICAgICB0eXBlOiAidGV4dC9wbGFpbjtjaGFyc2V0PXV0Zi04Ig0KICAgICAgICB9KTsNCiAgICAgICAgY29uc3QgdXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsNCiAgICAgICAgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsNCiAgICAgICAgYS5ocmVmID0gdXJsOw0KICAgICAgICBhLmRvd25sb2FkID0gem9uZS5uYW1lICsgIi5odG1sIjsNCiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhKTsNCiAgICAgICAgYS5jbGljaygpOw0KICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGEpOw0KICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKHVybCk7DQogICAgfSk7DQp9DQoNCmZ1bmN0aW9uIGZ1bGxzY3JlZW5ab25lKCkgew0KICAgIGlmICh6b25lRnJhbWUucmVxdWVzdEZ1bGxzY3JlZW4pIHsNCiAgICAgICAgem9uZUZyYW1lLnJlcXVlc3RGdWxsc2NyZWVuKCk7DQogICAgfSBlbHNlIGlmICh6b25lRnJhbWUubW96UmVxdWVzdEZ1bGxTY3JlZW4pIHsNCiAgICAgICAgem9uZUZyYW1lLm1velJlcXVlc3RGdWxsU2NyZWVuKCk7DQogICAgfSBlbHNlIGlmICh6b25lRnJhbWUud2Via2l0UmVxdWVzdEZ1bGxzY3JlZW4pIHsNCiAgICAgICAgem9uZUZyYW1lLndlYmtpdFJlcXVlc3RGdWxsc2NyZWVuKCk7DQogICAgfSBlbHNlIGlmICh6b25lRnJhbWUubXNSZXF1ZXN0RnVsbHNjcmVlbikgew0KICAgICAgICB6b25lRnJhbWUubXNSZXF1ZXN0RnVsbHNjcmVlbigpOw0KICAgIH0NCn0NCg0KZnVuY3Rpb24gc2FuaXRpemVEYXRhKG9iaiwgbWF4U3RyaW5nTGVuID0gMTAwMCwgbWF4QXJyYXlMZW4gPSAxMDAwMCkgew0KICAgIGlmICh0eXBlb2Ygb2JqID09PSAnc3RyaW5nJykgew0KICAgICAgcmV0dXJuIG9iai5sZW5ndGggPiBtYXhTdHJpbmdMZW4gPyBvYmouc2xpY2UoMCwgbWF4U3RyaW5nTGVuKSArICcuLi5bdHJ1bmNhdGVkXScgOiBvYmo7DQogICAgfQ0KICAgIA0KICAgIGlmIChvYmogaW5zdGFuY2VvZiBVaW50OEFycmF5KSB7DQogICAgICBpZiAob2JqLmxlbmd0aCA+IG1heEFycmF5TGVuKSB7DQogICAgICAgIHJldHVybiBgW1VpbnQ4QXJyYXkgdG9vIGxhcmdlICgke29iai5sZW5ndGh9IGJ5dGVzKSwgdHJ1bmNhdGVkXWA7DQogICAgICB9DQogICAgICByZXR1cm4gb2JqOw0KICAgIH0NCiAgICANCiAgICBpZiAoQXJyYXkuaXNBcnJheShvYmopKSB7DQogICAgICByZXR1cm4gb2JqLm1hcChpdGVtID0+IHNhbml0aXplRGF0YShpdGVtLCBtYXhTdHJpbmdMZW4sIG1heEFycmF5TGVuKSk7DQogICAgfQ0KICAgIA0KICAgIGlmIChvYmogJiYgdHlwZW9mIG9iaiA9PT0gJ29iamVjdCcpIHsNCiAgICAgIGNvbnN0IG5ld09iaiA9IHt9Ow0KICAgICAgZm9yIChjb25zdCBrZXkgaW4gb2JqKSB7DQogICAgICAgIGlmIChvYmouaGFzT3duUHJvcGVydHkoa2V5KSkgew0KICAgICAgICAgIG5ld09ialtrZXldID0gc2FuaXRpemVEYXRhKG9ialtrZXldLCBtYXhTdHJpbmdMZW4sIG1heEFycmF5TGVuKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgcmV0dXJuIG5ld09iajsNCiAgICB9DQogICAgDQogICAgcmV0dXJuIG9iajsNCiAgfQ0KDQphc3luYyBmdW5jdGlvbiBzYXZlRGF0YSgpIHsNCiAgICBhbGVydCgiVGhpcyBtaWdodCB0YWtlIGEgd2hpbGUsIGRvbnQgdG91Y2ggYW55dGhpbmcgb3RoZXIgdGhhbiB0aGlzIE9LIGJ1dHRvbiIpOw0KICAgIGNvbnN0IHJlc3VsdCA9IHt9Ow0KICAgIHJlc3VsdC5jb29raWVzID0gZG9jdW1lbnQuY29va2llOw0KICAgIHJlc3VsdC5sb2NhbFN0b3JhZ2UgPSB7Li4ubG9jYWxTdG9yYWdlfTsNCiAgICByZXN1bHQuc2Vzc2lvblN0b3JhZ2UgPSB7Li4uc2Vzc2lvblN0b3JhZ2V9Ow0KICAgIHJlc3VsdC5pbmRleGVkREIgPSB7fTsNCiAgICBjb25zdCBkYnMgPSBhd2FpdCBpbmRleGVkREIuZGF0YWJhc2VzKCk7DQogICAgZm9yIChjb25zdCBkYkluZm8gb2YgZGJzKSB7DQogICAgICBpZiAoIWRiSW5mby5uYW1lKSBjb250aW51ZTsNCiAgICAgIHJlc3VsdC5pbmRleGVkREJbZGJJbmZvLm5hbWVdID0ge307DQogICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7DQogICAgICAgIGNvbnN0IG9wZW5SZXF1ZXN0ID0gaW5kZXhlZERCLm9wZW4oZGJJbmZvLm5hbWUsIGRiSW5mby52ZXJzaW9uKTsNCiAgICAgICAgb3BlblJlcXVlc3Qub25lcnJvciA9ICgpID0+IHJlamVjdChvcGVuUmVxdWVzdC5lcnJvcik7DQogICAgICAgIG9wZW5SZXF1ZXN0Lm9uc3VjY2VzcyA9ICgpID0+IHsNCiAgICAgICAgICBjb25zdCBkYiA9IG9wZW5SZXF1ZXN0LnJlc3VsdDsNCiAgICAgICAgICBjb25zdCBzdG9yZU5hbWVzID0gQXJyYXkuZnJvbShkYi5vYmplY3RTdG9yZU5hbWVzKTsNCiAgICAgICAgICBpZiAoc3RvcmVOYW1lcy5sZW5ndGggPT09IDApIHsNCiAgICAgICAgICAgIHJlc29sdmUoKTsNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICB9DQogICAgICAgICAgY29uc3QgdHJhbnNhY3Rpb24gPSBkYi50cmFuc2FjdGlvbihzdG9yZU5hbWVzLCAicmVhZG9ubHkiKTsNCiAgICAgICAgICBjb25zdCBzdG9yZVByb21pc2VzID0gW107DQogICAgICAgICAgZm9yIChjb25zdCBzdG9yZU5hbWUgb2Ygc3RvcmVOYW1lcykgew0KICAgICAgICAgICAgcmVzdWx0LmluZGV4ZWREQltkYkluZm8ubmFtZV1bc3RvcmVOYW1lXSA9IFtdOw0KICAgICAgICAgICAgY29uc3Qgc3RvcmUgPSB0cmFuc2FjdGlvbi5vYmplY3RTdG9yZShzdG9yZU5hbWUpOw0KICAgICAgICAgICAgY29uc3QgZ2V0QWxsUmVxdWVzdCA9IHN0b3JlLmdldEFsbCgpOw0KICAgICAgICAgICAgY29uc3QgcCA9IG5ldyBQcm9taXNlKChyZXMsIHJlaikgPT4gew0KICAgICAgICAgICAgICBnZXRBbGxSZXF1ZXN0Lm9uc3VjY2VzcyA9ICgpID0+IHsNCiAgICAgICAgICAgICAgICByZXN1bHQuaW5kZXhlZERCW2RiSW5mby5uYW1lXVtzdG9yZU5hbWVdID0gc2FuaXRpemVEYXRhKGdldEFsbFJlcXVlc3QucmVzdWx0LCAxMDAwLCAxMDApOw0KICAgICAgICAgICAgICAgIHJlcygpOw0KICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAgICBnZXRBbGxSZXF1ZXN0Lm9uZXJyb3IgPSAoKSA9PiByZWooZ2V0QWxsUmVxdWVzdC5lcnJvcik7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIHN0b3JlUHJvbWlzZXMucHVzaChwKTsNCiAgICAgICAgICB9DQogICAgICAgICAgUHJvbWlzZS5hbGwoc3RvcmVQcm9taXNlcykudGhlbigoKSA9PiByZXNvbHZlKCkpOw0KICAgICAgICB9Ow0KICAgICAgfSk7DQogICAgfQ0KDQogICAgcmVzdWx0LmNhY2hlcyA9IHt9Ow0KICAgIGNvbnN0IGNhY2hlTmFtZXMgPSBhd2FpdCBjYWNoZXMua2V5cygpOw0KICAgIGZvciAoY29uc3QgY2FjaGVOYW1lIG9mIGNhY2hlTmFtZXMpIHsNCiAgICAgIGNvbnN0IGNhY2hlID0gYXdhaXQgY2FjaGVzLm9wZW4oY2FjaGVOYW1lKTsNCiAgICAgIGNvbnN0IHJlcXVlc3RzID0gYXdhaXQgY2FjaGUua2V5cygpOw0KICAgICAgcmVzdWx0LmNhY2hlc1tjYWNoZU5hbWVdID0gW107DQogICAgICBmb3IgKGNvbnN0IHJlcSBvZiByZXF1ZXN0cykgew0KICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGNhY2hlLm1hdGNoKHJlcSk7DQogICAgICAgIGlmICghcmVzcG9uc2UpIGNvbnRpbnVlOw0KICAgICAgICBjb25zdCBjbG9uZWQgPSByZXNwb25zZS5jbG9uZSgpOw0KICAgICAgICBjb25zdCBjb250ZW50VHlwZSA9IGNsb25lZC5oZWFkZXJzLmdldCgnY29udGVudC10eXBlJykgfHwgJyc7DQogICAgICAgIGxldCBib2R5Ow0KICAgICAgICB0cnkgew0KICAgICAgICAgIGlmIChjb250ZW50VHlwZS5pbmNsdWRlcygnYXBwbGljYXRpb24vanNvbicpKSB7DQogICAgICAgICAgICBib2R5ID0gYXdhaXQgY2xvbmVkLmpzb24oKTsNCiAgICAgICAgICB9IGVsc2UgaWYgKGNvbnRlbnRUeXBlLmluY2x1ZGVzKCd0ZXh0JykgfHwgY29udGVudFR5cGUuaW5jbHVkZXMoJ2phdmFzY3JpcHQnKSkgew0KICAgICAgICAgICAgYm9keSA9IGF3YWl0IGNsb25lZC50ZXh0KCk7DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIGNvbnN0IGJ1ZmZlciA9IGF3YWl0IGNsb25lZC5hcnJheUJ1ZmZlcigpOw0KICAgICAgICAgICAgYm9keSA9IGJ0b2EoU3RyaW5nLmZyb21DaGFyQ29kZSguLi5uZXcgVWludDhBcnJheShidWZmZXIpKSk7DQogICAgICAgICAgfQ0KICAgICAgICB9IGNhdGNoIChlKSB7DQogICAgICAgICAgYm9keSA9ICdbVW5hYmxlIHRvIHJlYWQgYm9keV0nOw0KICAgICAgICB9DQogICAgICAgIHJlc3VsdC5jYWNoZXNbY2FjaGVOYW1lXS5wdXNoKHsNCiAgICAgICAgICB1cmw6IHJlcS51cmwsDQogICAgICAgICAgYm9keSwNCiAgICAgICAgICBjb250ZW50VHlwZQ0KICAgICAgICB9KTsNCiAgICAgIH0NCiAgICB9DQogIA0KICAgIGFsZXJ0KCJEb25lLCB3YWl0IGZvciB0aGUgZG93bmxvYWQgdG8gY29tZSIpOw0KICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIik7DQogICAgbGluay5ocmVmID0gVVJMLmNyZWF0ZU9iamVjdFVSTChuZXcgQmxvYihbSlNPTi5zdHJpbmdpZnkocmVzdWx0KV0sIHsNCiAgICAgICAgdHlwZTogImFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbSINCiAgICB9KSk7DQogICAgbGluay5kb3dubG9hZCA9IGAke0RhdGUubm93KCl9LmRhdGFgOw0KICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobGluayk7DQogICAgbGluay5jbGljaygpOw0KICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobGluayk7DQogIH0NCiAgDQogIGFzeW5jIGZ1bmN0aW9uIGxvYWREYXRhKGV2ZW50KSB7DQogICAgY29uc3QgZmlsZSA9IGV2ZW50LnRhcmdldC5maWxlc1swXTsNCiAgICBpZiAoIWZpbGUpIHJldHVybjsNCiAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOw0KICAgIHJlYWRlci5vbmxvYWQgPSBhc3luYyBmdW5jdGlvbiAoZSkgew0KICAgICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShlLnRhcmdldC5yZXN1bHQpOw0KICAgICAgICBpZiAoZGF0YS5jb29raWVzKSB7DQogICAgICAgICAgICBkYXRhLmNvb2tpZXMuc3BsaXQoJzsnKS5mb3JFYWNoKGNvb2tpZSA9PiB7DQogICAgICAgICAgICAgIGRvY3VtZW50LmNvb2tpZSA9IGNvb2tpZS50cmltKCk7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAgIGlmIChkYXRhLmxvY2FsU3RvcmFnZSkgew0KICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gZGF0YS5sb2NhbFN0b3JhZ2UpIHsNCiAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCBkYXRhLmxvY2FsU3RvcmFnZVtrZXldKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAgIGlmIChkYXRhLnNlc3Npb25TdG9yYWdlKSB7DQogICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBkYXRhLnNlc3Npb25TdG9yYWdlKSB7DQogICAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oa2V5LCBkYXRhLnNlc3Npb25TdG9yYWdlW2tleV0pOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgDQogICAgICAgICAgaWYgKGRhdGEuaW5kZXhlZERCKSB7DQogICAgICAgICAgICBmb3IgKGNvbnN0IGRiTmFtZSBpbiBkYXRhLmluZGV4ZWREQikgew0KICAgICAgICAgICAgICBjb25zdCBzdG9yZXMgPSBkYXRhLmluZGV4ZWREQltkYk5hbWVdOw0KICAgICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7DQogICAgICAgICAgICAgICAgY29uc3QgcmVxdWVzdCA9IGluZGV4ZWREQi5vcGVuKGRiTmFtZSwgMSk7DQogICAgICAgICAgICAgICAgcmVxdWVzdC5vbnVwZ3JhZGVuZWVkZWQgPSBlID0+IHsNCiAgICAgICAgICAgICAgICAgIGNvbnN0IGRiID0gZS50YXJnZXQucmVzdWx0Ow0KICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBzdG9yZU5hbWUgaW4gc3RvcmVzKSB7DQogICAgICAgICAgICAgICAgICAgIGlmICghZGIub2JqZWN0U3RvcmVOYW1lcy5jb250YWlucyhzdG9yZU5hbWUpKSB7DQogICAgICAgICAgICAgICAgICAgICAgZGIuY3JlYXRlT2JqZWN0U3RvcmUoc3RvcmVOYW1lLCB7IGtleVBhdGg6ICdpZCcsIGF1dG9JbmNyZW1lbnQ6IHRydWUgfSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gZSA9PiB7DQogICAgICAgICAgICAgICAgICBjb25zdCBkYiA9IGUudGFyZ2V0LnJlc3VsdDsNCiAgICAgICAgICAgICAgICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gZGIudHJhbnNhY3Rpb24oT2JqZWN0LmtleXMoc3RvcmVzKSwgJ3JlYWR3cml0ZScpOw0KICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb24ub25lcnJvciA9ICgpID0+IHJlamVjdCh0cmFuc2FjdGlvbi5lcnJvcik7DQogICAgICAgICAgICAgICAgICBsZXQgcGVuZGluZ1N0b3JlcyA9IE9iamVjdC5rZXlzKHN0b3JlcykubGVuZ3RoOw0KICAgICAgICANCiAgICAgICAgICAgICAgICAgIGZvciAoY29uc3Qgc3RvcmVOYW1lIGluIHN0b3Jlcykgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBvYmplY3RTdG9yZSA9IHRyYW5zYWN0aW9uLm9iamVjdFN0b3JlKHN0b3JlTmFtZSk7DQogICAgICAgICAgICAgICAgICAgIG9iamVjdFN0b3JlLmNsZWFyKCkub25zdWNjZXNzID0gKCkgPT4gew0KICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBzdG9yZXNbc3RvcmVOYW1lXSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0U3RvcmUucHV0KGl0ZW0pOw0KICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICBwZW5kaW5nU3RvcmVzLS07DQogICAgICAgICAgICAgICAgICAgICAgaWYgKHBlbmRpbmdTdG9yZXMgPT09IDApIHJlc29sdmUoKTsNCiAgICAgICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAgICAgIHJlcXVlc3Qub25lcnJvciA9ICgpID0+IHJlamVjdChyZXF1ZXN0LmVycm9yKTsNCiAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgICBpZiAoZGF0YS5jYWNoZXMpIHsNCiAgICAgICAgICAgIGZvciAoY29uc3QgY2FjaGVOYW1lIGluIGRhdGEuY2FjaGVzKSB7DQogICAgICAgICAgICAgIGNvbnN0IGNhY2hlID0gYXdhaXQgY2FjaGVzLm9wZW4oY2FjaGVOYW1lKTsNCiAgICAgICAgICAgICAgYXdhaXQgY2FjaGUua2V5cygpLnRoZW4oa2V5cyA9PiBQcm9taXNlLmFsbChrZXlzLm1hcChrID0+IGNhY2hlLmRlbGV0ZShrKSkpKTsgLy8gY2xlYXIgZXhpc3RpbmcNCiAgICAgICAgDQogICAgICAgICAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgZGF0YS5jYWNoZXNbY2FjaGVOYW1lXSkgew0KICAgICAgICAgICAgICAgIGxldCByZXNwb25zZUJvZHk7DQogICAgICAgICAgICAgICAgaWYgKGVudHJ5LmNvbnRlbnRUeXBlLmluY2x1ZGVzKCdhcHBsaWNhdGlvbi9qc29uJykpIHsNCiAgICAgICAgICAgICAgICAgIHJlc3BvbnNlQm9keSA9IEpTT04uc3RyaW5naWZ5KGVudHJ5LmJvZHkpOw0KICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZW50cnkuY29udGVudFR5cGUuaW5jbHVkZXMoJ3RleHQnKSB8fCBlbnRyeS5jb250ZW50VHlwZS5pbmNsdWRlcygnamF2YXNjcmlwdCcpKSB7DQogICAgICAgICAgICAgICAgICByZXNwb25zZUJvZHkgPSBlbnRyeS5ib2R5Ow0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICBjb25zdCBiaW5hcnlTdHIgPSBhdG9iKGVudHJ5LmJvZHkpOw0KICAgICAgICAgICAgICAgICAgY29uc3QgbGVuID0gYmluYXJ5U3RyLmxlbmd0aDsNCiAgICAgICAgICAgICAgICAgIGNvbnN0IGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkobGVuKTsNCiAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgYnl0ZXNbaV0gPSBiaW5hcnlTdHIuY2hhckNvZGVBdChpKTsNCiAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgIHJlc3BvbnNlQm9keSA9IGJ5dGVzLmJ1ZmZlcjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgY29uc3QgaGVhZGVycyA9IG5ldyBIZWFkZXJzKHsgJ2NvbnRlbnQtdHlwZSc6IGVudHJ5LmNvbnRlbnRUeXBlIH0pOw0KICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gbmV3IFJlc3BvbnNlKHJlc3BvbnNlQm9keSwgeyBoZWFkZXJzIH0pOw0KICAgICAgICAgICAgICAgIGF3YWl0IGNhY2hlLnB1dChlbnRyeS51cmwsIHJlc3BvbnNlKTsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgYWxlcnQoIkRhdGEgbG9hZGVkIik7DQogICAgfTsNCiAgICBhbGVydCgiVGhpcyBtaWdodCB0YWtlIGEgd2hpbGUsIGRvbnQgdG91Y2ggYW55dGhpbmcgb3RoZXIgdGhhbiB0aGlzIE9LIGJ1dHRvbiIpOw0KICAgIHJlYWRlci5yZWFkQXNUZXh0KGZpbGUpOw0KICB9DQoNCmZ1bmN0aW9uIGRhcmtNb2RlKCkgew0KICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgiZGFyay1tb2RlIik7DQp9DQoNCmZ1bmN0aW9uIGNsb2FrSWNvbih1cmwpIHsNCiAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigibGlua1tyZWx+PSdpY29uJ10iKTsNCiAgICBsaW5rLnJlbCA9ICJpY29uIjsNCiAgICBpZiAoKHVybCsiIikudHJpbSgpLmxlbmd0aCA9PT0gMCkgew0KICAgICAgICBsaW5rLmhyZWYgPSAiZmF2aWNvbi5wbmciOw0KICAgIH0gZWxzZSB7DQogICAgICAgIGxpbmsuaHJlZiA9IHVybDsNCiAgICB9DQogICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChsaW5rKTsNCn0NCmZ1bmN0aW9uIGNsb2FrTmFtZShzdHJpbmcpIHsNCiAgICBpZiAoKHN0cmluZysiIikudHJpbSgpLmxlbmd0aCA9PT0gMCkgew0KICAgICAgICBkb2N1bWVudC50aXRsZSA9ICJnbi1tYXRoIjsNCiAgICAgICAgcmV0dXJuOw0KICAgIH0NCiAgICBkb2N1bWVudC50aXRsZSA9IHN0cmluZzsNCn0NCg0KZnVuY3Rpb24gdGFiQ2xvYWsoKSB7DQogICAgY2xvc2VQb3B1cCgpOw0KICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwb3B1cFRpdGxlJykudGV4dENvbnRlbnQgPSAiVGFiIENsb2FrIjsNCiAgICBjb25zdCBwb3B1cEJvZHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncG9wdXBCb2R5Jyk7DQogICAgcG9wdXBCb2R5LmlubmVySFRNTCA9IGANCiAgICAgICAgPGxhYmVsIGZvcj0idGFiLWNsb2FrLXRleHRib3giIHN0eWxlPSJmb250LXdlaWdodDogYm9sZDsiPlNldCBUYWIgVGl0bGU6PC9sYWJlbD48YnI+DQogICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0idGFiLWNsb2FrLXRleHRib3giIHBsYWNlaG9sZGVyPSJFbnRlciBuZXcgdGFiIG5hbWUuLi4iIG9uaW5wdXQ9ImNsb2FrTmFtZSh0aGlzLnZhbHVlKSI+DQogICAgICAgIDxicj48YnI+PGJyPjxicj4NCiAgICAgICAgPGxhYmVsIGZvcj0idGFiLWNsb2FrLXRleHRib3giIHN0eWxlPSJmb250LXdlaWdodDogYm9sZDsiPlNldCBUYWIgSWNvbjo8L2xhYmVsPjxicj4NCiAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGlkPSJ0YWItY2xvYWstdGV4dGJveCIgcGxhY2Vob2xkZXI9IkVudGVyIG5ldyB0YWIgaWNvbi4uLiIgb25pbnB1dD0nY2xvYWtJY29uKHRoaXMudmFsdWUpJz4NCiAgICAgICAgPGJyPjxicj48YnI+DQogICAgYDsNCiAgICBwb3B1cEJvZHkuY29udGVudEVkaXRhYmxlID0gZmFsc2U7DQogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BvcHVwT3ZlcmxheScpLnN0eWxlLmRpc3BsYXkgPSAiZmxleCI7DQp9DQoNCmNvbnN0IHNldHRpbmdzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NldHRpbmdzJyk7DQpzZXR0aW5ncy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsNCiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncG9wdXBUaXRsZScpLnRleHRDb250ZW50ID0gIlNldHRpbmdzIjsNCiAgICBjb25zdCBwb3B1cEJvZHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncG9wdXBCb2R5Jyk7DQogICAgcG9wdXBCb2R5LmlubmVySFRNTCA9IGANCiAgICA8YnV0dG9uIGNsYXNzPSJzZXR0aW5ncy1idXR0b24iIG9uY2xpY2s9ImRhcmtNb2RlKCkiPlRvZ2dsZSBEYXJrIE1vZGU8L2J1dHRvbj4NCiAgICA8YnI+PGJyPg0KICAgIDxidXR0b24gY2xhc3M9InNldHRpbmdzLWJ1dHRvbiIgb25jbGljaz0idGFiQ2xvYWsoKSI+VGFiIENsb2FrPC9idXR0b24+DQogICAgPGJyPg0KICAgIGA7DQogICAgcG9wdXBCb2R5LmNvbnRlbnRFZGl0YWJsZSA9IGZhbHNlOw0KICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwb3B1cE92ZXJsYXknKS5zdHlsZS5kaXNwbGF5ID0gImZsZXgiOw0KfSk7DQoNCmZ1bmN0aW9uIHNob3dDb250YWN0KCkgew0KICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwb3B1cFRpdGxlJykudGV4dENvbnRlbnQgPSAiQ29udGFjdCI7DQogICAgY29uc3QgcG9wdXBCb2R5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BvcHVwQm9keScpOw0KICAgIHBvcHVwQm9keS5pbm5lckhUTUwgPSBgDQogICAgPHA+RGlzY29yZDogaHR0cHM6Ly9kaXNjb3JkLmdnL05BRnc0eWtaN248L3A+DQogICAgPHA+RW1haWw6IGduLm1hdGguYnVzaW5lc3NAZ21haWwuY29tPC9wPmA7DQogICAgcG9wdXBCb2R5LmNvbnRlbnRFZGl0YWJsZSA9IGZhbHNlOw0KICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwb3B1cE92ZXJsYXknKS5zdHlsZS5kaXNwbGF5ID0gImZsZXgiOw0KfQ0KDQpmdW5jdGlvbiBsb2FkUHJpdmFjeSgpIHsNCiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncG9wdXBUaXRsZScpLnRleHRDb250ZW50ID0gIlByaXZhY3kgUG9saWN5IjsNCiAgICBjb25zdCBwb3B1cEJvZHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncG9wdXBCb2R5Jyk7DQogICAgcG9wdXBCb2R5LmlubmVySFRNTCA9IGANCiAgICAgICAgPGRpdiBzdHlsZT0ibWF4LWhlaWdodDogNjB2aDsgb3ZlcmZsb3cteTogYXV0bzsiPg0KICAgICAgICAgICAgPGgyPlBSSVZBQ1kgUE9MSUNZPC9oMj4NCiAgICAgICAgICAgIDxwPkxhc3QgdXBkYXRlZCBBcHJpbCAxNywgMjAyNTwvcD4NCiAgICAgICAgICAgIDxwPlRoaXMgUHJpdmFjeSBOb3RpY2UgZm9yIGduLW1hdGggKCJ3ZSwiICJ1cywiIG9yICJvdXIiKSwgZGVzY3JpYmVzIGhvdyBhbmQgd2h5IHdlIG1pZ2h0IGFjY2VzcywgY29sbGVjdCwgc3RvcmUsIHVzZSwgYW5kL29yIHNoYXJlICgicHJvY2VzcyIpIHlvdXIgcGVyc29uYWwgaW5mb3JtYXRpb24gd2hlbiB5b3UgdXNlIG91ciBzZXJ2aWNlcyAoIlNlcnZpY2VzIiksIGluY2x1ZGluZyB3aGVuIHlvdTo8L3A+DQogICAgICAgICAgICA8dWw+DQogICAgICAgICAgICAgICAgPGxpPlZpc2l0IG91ciB3ZWJzaXRlIGF0IDxhIGhyZWY9Imh0dHBzOi8vZ24tbWF0aC5naXRodWIuaW8iPmh0dHBzOi8vZ24tbWF0aC5naXRodWIuaW88L2E+LCBvciBhbnkgd2Vic2l0ZSBvZiBvdXJzIHRoYXQgbGlua3MgdG8gdGhpcyBQcml2YWN5IE5vdGljZTwvbGk+DQogICAgICAgICAgICAgICAgPGxpPkVuZ2FnZSB3aXRoIHVzIGluIG90aGVyIHJlbGF0ZWQgd2F5cywgaW5jbHVkaW5nIGFueSBzYWxlcywgbWFya2V0aW5nLCBvciBldmVudHM8L2xpPg0KICAgICAgICAgICAgPC91bD4NCiAgICAgICAgICAgIDxwPlF1ZXN0aW9ucyBvciBjb25jZXJucz8gUmVhZGluZyB0aGlzIFByaXZhY3kgTm90aWNlIHdpbGwgaGVscCB5b3UgdW5kZXJzdGFuZCB5b3VyIHByaXZhY3kgcmlnaHRzIGFuZCBjaG9pY2VzLiBXZSBhcmUgcmVzcG9uc2libGUgZm9yIG1ha2luZyBkZWNpc2lvbnMgYWJvdXQgaG93IHlvdXIgcGVyc29uYWwgaW5mb3JtYXRpb24gaXMgcHJvY2Vzc2VkLiBJZiB5b3UgZG8gbm90IGFncmVlIHdpdGggb3VyIHBvbGljaWVzIGFuZCBwcmFjdGljZXMsIHBsZWFzZSBkbyBub3QgdXNlIG91ciBTZXJ2aWNlcy4gSWYgeW91IHN0aWxsIGhhdmUgYW55IHF1ZXN0aW9ucyBvciBjb25jZXJucywgcGxlYXNlIGNvbnRhY3QgdXMgYXQgPGEgaHJlZj0iaHR0cHM6Ly9kaXNjb3JkLmdnL05BRnc0eWtaN24iPmh0dHBzOi8vZGlzY29yZC5nZy9OQUZ3NHlrWjduPC9hPi48L3A+DQogICAgICAgICAgICANCiAgICAgICAgICAgIDxoMz5TVU1NQVJZIE9GIEtFWSBQT0lOVFM8L2gzPg0KICAgICAgICAgICAgPHA+VGhpcyBzdW1tYXJ5IHByb3ZpZGVzIGtleSBwb2ludHMgZnJvbSBvdXIgUHJpdmFjeSBOb3RpY2UsIGJ1dCB5b3UgY2FuIGZpbmQgb3V0IG1vcmUgZGV0YWlscyBhYm91dCBhbnkgb2YgdGhlc2UgdG9waWNzIGJ5IGNsaWNraW5nIHRoZSBsaW5rIGZvbGxvd2luZyBlYWNoIGtleSBwb2ludCBvciBieSB1c2luZyBvdXIgdGFibGUgb2YgY29udGVudHMgYmVsb3cgdG8gZmluZCB0aGUgc2VjdGlvbiB5b3UgYXJlIGxvb2tpbmcgZm9yLjwvcD4NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgPHA+PHN0cm9uZz5XaGF0IHBlcnNvbmFsIGluZm9ybWF0aW9uIGRvIHdlIHByb2Nlc3M/PC9zdHJvbmc+IFdoZW4geW91IHZpc2l0LCB1c2UsIG9yIG5hdmlnYXRlIG91ciBTZXJ2aWNlcywgd2UgbWF5IHByb2Nlc3MgcGVyc29uYWwgaW5mb3JtYXRpb24gZGVwZW5kaW5nIG9uIGhvdyB5b3UgaW50ZXJhY3Qgd2l0aCB1cyBhbmQgdGhlIFNlcnZpY2VzLCB0aGUgY2hvaWNlcyB5b3UgbWFrZSwgYW5kIHRoZSBwcm9kdWN0cyBhbmQgZmVhdHVyZXMgeW91IHVzZS4gTGVhcm4gbW9yZSBhYm91dCBwZXJzb25hbCBpbmZvcm1hdGlvbiB5b3UgZGlzY2xvc2UgdG8gdXMuPC9wPg0KICAgICAgICAgICAgDQogICAgICAgICAgICA8cD48c3Ryb25nPkRvIHdlIHByb2Nlc3MgYW55IHNlbnNpdGl2ZSBwZXJzb25hbCBpbmZvcm1hdGlvbj88L3N0cm9uZz4gU29tZSBvZiB0aGUgaW5mb3JtYXRpb24gbWF5IGJlIGNvbnNpZGVyZWQgInNwZWNpYWwiIG9yICJzZW5zaXRpdmUiIGluIGNlcnRhaW4ganVyaXNkaWN0aW9ucywgZm9yIGV4YW1wbGUgeW91ciByYWNpYWwgb3IgZXRobmljIG9yaWdpbnMsIHNleHVhbCBvcmllbnRhdGlvbiwgYW5kIHJlbGlnaW91cyBiZWxpZWZzLiBXZSBkbyBub3QgcHJvY2VzcyBzZW5zaXRpdmUgcGVyc29uYWwgaW5mb3JtYXRpb24uPC9wPg0KICAgICAgICAgICAgDQogICAgICAgICAgICA8cD48c3Ryb25nPkRvIHdlIGNvbGxlY3QgYW55IGluZm9ybWF0aW9uIGZyb20gdGhpcmQgcGFydGllcz88L3N0cm9uZz4gV2UgZG8gbm90IGNvbGxlY3QgYW55IGluZm9ybWF0aW9uIGZyb20gdGhpcmQgcGFydGllcy48L3A+DQogICAgICAgICAgICANCiAgICAgICAgICAgIDxwPjxzdHJvbmc+SG93IGRvIHdlIHByb2Nlc3MgeW91ciBpbmZvcm1hdGlvbj88L3N0cm9uZz4gV2UgcHJvY2VzcyB5b3VyIGluZm9ybWF0aW9uIHRvIHByb3ZpZGUsIGltcHJvdmUsIGFuZCBhZG1pbmlzdGVyIG91ciBTZXJ2aWNlcywgY29tbXVuaWNhdGUgd2l0aCB5b3UsIGZvciBzZWN1cml0eSBhbmQgZnJhdWQgcHJldmVudGlvbiwgYW5kIHRvIGNvbXBseSB3aXRoIGxhdy4gV2UgbWF5IGFsc28gcHJvY2VzcyB5b3VyIGluZm9ybWF0aW9uIGZvciBvdGhlciBwdXJwb3NlcyB3aXRoIHlvdXIgY29uc2VudC4gV2UgcHJvY2VzcyB5b3VyIGluZm9ybWF0aW9uIG9ubHkgd2hlbiB3ZSBoYXZlIGEgdmFsaWQgbGVnYWwgcmVhc29uIHRvIGRvIHNvLiBMZWFybiBtb3JlIGFib3V0IGhvdyB3ZSBwcm9jZXNzIHlvdXIgaW5mb3JtYXRpb24uPC9wPg0KICAgICAgICAgICAgDQogICAgICAgICAgICA8cD48c3Ryb25nPkluIHdoYXQgc2l0dWF0aW9ucyBhbmQgd2l0aCB3aGljaCBwYXJ0aWVzIGRvIHdlIHNoYXJlIHBlcnNvbmFsIGluZm9ybWF0aW9uPzwvc3Ryb25nPiBXZSBtYXkgc2hhcmUgaW5mb3JtYXRpb24gaW4gc3BlY2lmaWMgc2l0dWF0aW9ucyBhbmQgd2l0aCBzcGVjaWZpYyB0aGlyZCBwYXJ0aWVzLiBMZWFybiBtb3JlIGFib3V0IHdoZW4gYW5kIHdpdGggd2hvbSB3ZSBzaGFyZSB5b3VyIHBlcnNvbmFsIGluZm9ybWF0aW9uLjwvcD4NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgPHA+PHN0cm9uZz5Ib3cgZG8gd2Uga2VlcCB5b3VyIGluZm9ybWF0aW9uIHNhZmU/PC9zdHJvbmc+IFdlIGhhdmUgYWRlcXVhdGUgb3JnYW5pemF0aW9uYWwgYW5kIHRlY2huaWNhbCBwcm9jZXNzZXMgYW5kIHByb2NlZHVyZXMgaW4gcGxhY2UgdG8gcHJvdGVjdCB5b3VyIHBlcnNvbmFsIGluZm9ybWF0aW9uLiBIb3dldmVyLCBubyBlbGVjdHJvbmljIHRyYW5zbWlzc2lvbiBvdmVyIHRoZSBpbnRlcm5ldCBvciBpbmZvcm1hdGlvbiBzdG9yYWdlIHRlY2hub2xvZ3kgY2FuIGJlIGd1YXJhbnRlZWQgdG8gYmUgMTAwJSBzZWN1cmUsIHNvIHdlIGNhbm5vdCBwcm9taXNlIG9yIGd1YXJhbnRlZSB0aGF0IGhhY2tlcnMsIGN5YmVyY3JpbWluYWxzLCBvciBvdGhlciB1bmF1dGhvcml6ZWQgdGhpcmQgcGFydGllcyB3aWxsIG5vdCBiZSBhYmxlIHRvIGRlZmVhdCBvdXIgc2VjdXJpdHkgYW5kIGltcHJvcGVybHkgY29sbGVjdCwgYWNjZXNzLCBzdGVhbCwgb3IgbW9kaWZ5IHlvdXIgaW5mb3JtYXRpb24uIExlYXJuIG1vcmUgYWJvdXQgaG93IHdlIGtlZXAgeW91ciBpbmZvcm1hdGlvbiBzYWZlLjwvcD4NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgPHA+PHN0cm9uZz5XaGF0IGFyZSB5b3VyIHJpZ2h0cz88L3N0cm9uZz4gRGVwZW5kaW5nIG9uIHdoZXJlIHlvdSBhcmUgbG9jYXRlZCBnZW9ncmFwaGljYWxseSwgdGhlIGFwcGxpY2FibGUgcHJpdmFjeSBsYXcgbWF5IG1lYW4geW91IGhhdmUgY2VydGFpbiByaWdodHMgcmVnYXJkaW5nIHlvdXIgcGVyc29uYWwgaW5mb3JtYXRpb24uIExlYXJuIG1vcmUgYWJvdXQgeW91ciBwcml2YWN5IHJpZ2h0cy48L3A+DQogICAgICAgICAgICANCiAgICAgICAgICAgIDxwPjxzdHJvbmc+SG93IGRvIHlvdSBleGVyY2lzZSB5b3VyIHJpZ2h0cz88L3N0cm9uZz4gVGhlIGVhc2llc3Qgd2F5IHRvIGV4ZXJjaXNlIHlvdXIgcmlnaHRzIGlzIGJ5IHN1Ym1pdHRpbmcgYSBkYXRhIHN1YmplY3QgYWNjZXNzIHJlcXVlc3QsIG9yIGJ5IGNvbnRhY3RpbmcgdXMuIFdlIHdpbGwgY29uc2lkZXIgYW5kIGFjdCB1cG9uIGFueSByZXF1ZXN0IGluIGFjY29yZGFuY2Ugd2l0aCBhcHBsaWNhYmxlIGRhdGEgcHJvdGVjdGlvbiBsYXdzLjwvcD4NCiAgICAgICAgPC9kaXY+DQogICAgYDsNCiAgICBwb3B1cEJvZHkuY29udGVudEVkaXRhYmxlID0gZmFsc2U7DQogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BvcHVwT3ZlcmxheScpLnN0eWxlLmRpc3BsYXkgPSAiZmxleCI7DQp9DQoNCmZ1bmN0aW9uIGxvYWRETUNBKCkgew0KICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwb3B1cFRpdGxlJykudGV4dENvbnRlbnQgPSAiRE1DQSI7DQogICAgY29uc3QgcG9wdXBCb2R5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BvcHVwQm9keScpOw0KICAgIHBvcHVwQm9keS5pbm5lckhUTUwgPSBgDQogICAgICAgIDxkaXYgY2xhc3M9ImRtY2EtY29udGVudCI+DQogICAgICAgICAgICA8cD4NCiAgICAgICAgICAgICAgICBJZiB5b3Ugb3duIG9yIGRldmVsb3BlZCBhIGdhbWUgdGhhdCBpcyBvbiA8c3Ryb25nPmduLW1hdGg8L3N0cm9uZz4gDQogICAgICAgICAgICAgICAgYW5kIHdvdWxkIGxpa2UgaXQgcmVtb3ZlZCwgcGxlYXNlIGRvIG9uZSBvZiB0aGUgZm9sbG93aW5nOg0KICAgICAgICAgICAgPC9wPg0KICAgICAgICAgICAgPG9sPg0KICAgICAgICAgICAgICAgIDxsaT4NCiAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj0iaHR0cHM6Ly9kaXNjb3JkLmdnL0Q0YzlWRllXeVUiIHRhcmdldD0iX2JsYW5rIiByZWw9Im5vb3BlbmVyIG5vcmVmZXJyZXIiPg0KICAgICAgICAgICAgICAgICAgICAgICAgSm9pbiB0aGUgRGlzY29yZA0KICAgICAgICAgICAgICAgICAgICA8L2E+IGFuZCBETSA8c3Ryb25nPmJyZWFkYmI8L3N0cm9uZz4gb3IgcGluZyBtZSBpbiBhIHB1YmxpYyBjaGFubmVsIA0KICAgICAgICAgICAgICAgICAgICA8c3Ryb25nPltJTlNUQU5UIFJFU1BPTlNFXTwvc3Ryb25nPg0KICAgICAgICAgICAgICAgIDwvbGk+DQogICAgICAgICAgICAgICAgPGxpPg0KICAgICAgICAgICAgICAgICAgICBFbWFpbCBtZSBhdCANCiAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj0ibWFpbHRvOmduLm1hdGguYnVzaW5lc3NAZ21haWwuY29tIj5nbi5tYXRoLmJ1c2luZXNzQGdtYWlsLmNvbTwvYT4gDQogICAgICAgICAgICAgICAgICAgIHdpdGggdGhlIHN1YmplY3Qgc3RhcnRpbmcgd2l0aCA8Y29kZT4hRE1DQTwvY29kZT4uDQogICAgICAgICAgICAgICAgICAgIDxzdHJvbmc+W0RFTEFZRUQgUkVTUE9OU0VdPC9zdHJvbmc+DQogICAgICAgICAgICAgICAgPC9saT4NCiAgICAgICAgICAgIDwvb2w+DQogICAgICAgICAgICA8cD4NCiAgICAgICAgICAgICAgICBJZiB5b3UgYXJlIGdvaW5nIHRvIGRvIGFuIGVtYWlsLCBwbGVhc2Ugc2hvdyBwcm9vZiB5b3Ugb3duIHRoZSBnYW1lIGJlZm9yZSBJIGhhdmUgdG8gYXNrLg0KICAgICAgICAgICAgPC9wPg0KICAgICAgICA8L2Rpdj4NCiAgICBgOw0KICAgIHBvcHVwQm9keS5jb250ZW50RWRpdGFibGUgPSBmYWxzZTsNCiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncG9wdXBPdmVybGF5Jykuc3R5bGUuZGlzcGxheSA9ICJmbGV4IjsNCn0NCg0KbGV0IF9hbGxTdGF0c0NhY2hlID0gbnVsbDsNCg0KYXN5bmMgZnVuY3Rpb24gZ2V0QWxsU3RhdHMoKSB7DQogIGlmIChfYWxsU3RhdHNDYWNoZSkgew0KICAgIHJldHVybiBfYWxsU3RhdHNDYWNoZTsNCiAgfQ0KDQogIGNvbnN0IEJBU0VfVVJMID0NCiAgICAiaHR0cHM6Ly9kYXRhLmpzZGVsaXZyLmNvbS92MS9zdGF0cy9wYWNrYWdlcy9naC9nbi1tYXRoL2h0bWxAbWFpbi9maWxlcyI7DQogIGNvbnN0IFBFUklPRCA9ICJ5ZWFyIjsNCiAgY29uc3QgUEFHRV9CQVRDSCA9IDU7DQoNCiAgbGV0IHBhZ2UgPSAxOw0KICBsZXQgZG9uZSA9IGZhbHNlOw0KICBjb25zdCBjb21iaW5lZE1hcCA9IE9iamVjdC5jcmVhdGUobnVsbCk7DQoNCiAgd2hpbGUgKCFkb25lKSB7DQogICAgY29uc3QgcGFnZXMgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiBQQUdFX0JBVENIIH0sIChfLCBpKSA9PiBwYWdlICsgaSk7DQoNCiAgICBjb25zdCByZXNwb25zZXMgPSBhd2FpdCBQcm9taXNlLmFsbCgNCiAgICAgIHBhZ2VzLm1hcChwID0+DQogICAgICAgIGZldGNoKGAke0JBU0VfVVJMfT9wZXJpb2Q9JHtQRVJJT0R9JnBhZ2U9JHtwfSZsaW1pdD0xMDBgKQ0KICAgICAgICAgIC50aGVuKHIgPT4gKHIub2sgPyByLmpzb24oKSA6IFtdKSkNCiAgICAgICkNCiAgICApOw0KDQogICAgZm9yIChjb25zdCBkYXRhIG9mIHJlc3BvbnNlcykgew0KICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGRhdGEpIHx8IGRhdGEubGVuZ3RoID09PSAwKSB7DQogICAgICAgIGRvbmUgPSB0cnVlOw0KICAgICAgICBicmVhazsNCiAgICAgIH0NCg0KICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGRhdGEpIHsNCiAgICAgICAgaWYgKCFpdGVtPy5uYW1lKSBjb250aW51ZTsNCg0KICAgICAgICBjb25zdCBtYXRjaCA9IGl0ZW0ubmFtZS5tYXRjaCgvXlwvKFxkKykoWy4tXSkvKTsNCiAgICAgICAgaWYgKCFtYXRjaCkgY29udGludWU7DQoNCiAgICAgICAgY29uc3QgaWQgPSBtYXRjaFsxXTsNCg0KICAgICAgICBpZiAoIWNvbWJpbmVkTWFwW2lkXSkgew0KICAgICAgICAgIGNvbWJpbmVkTWFwW2lkXSA9IHsNCiAgICAgICAgICAgIGhpdHM6IDAsDQogICAgICAgICAgICBiYW5kd2lkdGg6IDANCiAgICAgICAgICB9Ow0KICAgICAgICB9DQoNCiAgICAgICAgY29tYmluZWRNYXBbaWRdLmhpdHMgKz0gaXRlbS5oaXRzPy50b3RhbCA/PyAwOw0KICAgICAgICBjb21iaW5lZE1hcFtpZF0uYmFuZHdpZHRoICs9IGl0ZW0uYmFuZHdpZHRoPy50b3RhbCA/PyAwOw0KICAgICAgfQ0KICAgIH0NCg0KICAgIHBhZ2UgKz0gUEFHRV9CQVRDSDsNCiAgfQ0KDQogIF9hbGxTdGF0c0NhY2hlID0gY29tYmluZWRNYXA7DQogIHJldHVybiBjb21iaW5lZE1hcDsNCn0NCg0KYXN5bmMgZnVuY3Rpb24gZ2V0U3RhdHMoaWQpIHsNCiAgaWQgPSBTdHJpbmcoaWQpOw0KICBjb25zdCBhbGxTdGF0cyA9IGF3YWl0IGdldEFsbFN0YXRzKCk7DQoNCiAgcmV0dXJuIGFsbFN0YXRzW2lkXT8uaGl0cyA/PyAwOw0KfQ0KDQpmdW5jdGlvbiBzaG93Wm9uZUluZm8oKSB7DQogICAgbGV0IGlkID0gTnVtYmVyKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd6b25lSWQnKS50ZXh0Q29udGVudCk7DQogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BvcHVwVGl0bGUnKS50ZXh0Q29udGVudCA9ICJJbmZvIjsNCiAgICBjb25zdCBwb3B1cEJvZHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncG9wdXBCb2R5Jyk7DQogICAgcG9wdXBCb2R5LmlubmVySFRNTCA9IGA8cD5Mb2FkaW5nLi4uPC9wPmANCiAgICBwb3B1cEJvZHkuY29udGVudEVkaXRhYmxlID0gZmFsc2U7DQogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BvcHVwT3ZlcmxheScpLnN0eWxlLmRpc3BsYXkgPSAiZmxleCI7DQogICAgZmV0Y2goYGh0dHBzOi8vYXBpLmdpdGh1Yi5jb20vcmVwb3MvZ24tbWF0aC9odG1sL2NvbW1pdHM/cGF0aD0ke2lkfS5odG1sYCkudGhlbihyZXMgPT4gcmVzLmpzb24oKSkudGhlbihhc3luYyBqc29uID0+IHsNCiAgICAgICAgbGV0IHN0YXRzID0gYXdhaXQgZ2V0U3RhdHMgKGlkKTsNCiAgICAgICAgaWRqc29uID0gem9uZXMuZmlsdGVyKGE9PmEuaWQ9PT1pZClbMF0NCiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BvcHVwVGl0bGUnKS50ZXh0Q29udGVudCA9IGAke2lkanNvbi5uYW1lfSBJbmZvYDsNCiAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGpzb24uYXQoLTEpLmNvbW1pdC5hdXRob3IuZGF0ZSk7DQogICAgICAgIGxldCBmb3JtYXR0ZWRkYXRlID0gbmV3IEludGwuRGF0ZVRpbWVGb3JtYXQoImVuLVVTIiwgew0KICBtb250aDogImxvbmciLA0KICBkYXk6ICJudW1lcmljIiwNCiAgeWVhcjogIm51bWVyaWMiLA0KICBob3VyOiAibnVtZXJpYyIsDQogIG1pbnV0ZTogIjItZGlnaXQiLA0KICBob3VyMTI6IHRydWUNCn0pLmZvcm1hdChkYXRlKTsNCiAgICAgICAgcG9wdXBCb2R5LmlubmVySFRNTCA9IGANCiAgICAgICAgPHA+DQogICAgICAgIDxiPklkPC9iPjogJHtpZH08YnI+DQogICAgICAgIDxiPk5hbWU8L2I+OiAke2lkanNvbi5uYW1lfTxicj4NCiAgICAgICAgJHtpZGpzb24uYXV0aG9yP2A8Yj5HYW1lIEF1dGhvcjwvYj46ICR7aWRqc29uLmF1dGhvcn08YnI+YDoiIn0NCiAgICAgICAgJHtpZGpzb24uYXV0aG9yTGluaz9gPGI+R2FtZSBBdXRob3IgTGluazwvYj46IDxhIHN0eWxlPSJjb2xvcjojRkZGRjAwOyIgaHJlZj0ke2lkanNvbi5hdXRob3JMaW5rfT4ke2lkanNvbi5hdXRob3JMaW5rfTwvYT48YnI+YDoiIn0NCiAgICAgICAgJHtpZGpzb24uc3BlY2lhbD9gPGI+VGFnczwvYj46ICR7aWRqc29uLnNwZWNpYWx9PGJyPmA6IiJ9DQogICAgICAgIDxiPkduLU1hdGggQWRkZXI8L2I+OiAke2pzb24uYXQoLTEpLmNvbW1pdC5hdXRob3IubmFtZX08YnI+DQogICAgICAgIDxiPkRhdGUgQWRkZWQ8L2I+OiAke2Zvcm1hdHRlZGRhdGV9PGJyPg0KICAgICAgICA8Yj5UaW1lcyBQbGF5ZWQgKEdsb2JhbGx5KTwvYj46ICR7TnVtYmVyKHN0YXRzKS50b0xvY2FsZVN0cmluZygiZW4tVVMiKX0NCiAgICAgICAgPC9wPmA7DQogICAgfSkNCn0NCg0KZnVuY3Rpb24gY2xvc2VQb3B1cCgpIHsNCiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncG9wdXBPdmVybGF5Jykuc3R5bGUuZGlzcGxheSA9ICJub25lIjsNCn0NCmxpc3Rab25lcygpOw0KDQpjb25zdCBzY2hvb2xMaXN0ID0gWyJkZWxlZGFvIiwgImdvZ3VhcmRpYW4iLCAibGlnaHRzcGVlZCIsICJsaW5ld2l6ZSIsICJzZWN1cmx5IiwgIi5lZHUvIl07DQoNCmZ1bmN0aW9uIGlzQmxvY2tlZERvbWFpbih1cmwpIHsNCiAgICB0cnkgew0KICAgIGNvbnN0IGRvbWFpbiA9IG5ldyBVUkwodXJsLCBsb2NhdGlvbi5vcmlnaW4pLmhvc3RuYW1lICsgIi8iOw0KICAgIHJldHVybiBzY2hvb2xMaXN0LnNvbWUoc2Nob29sID0+IGRvbWFpbi5pbmNsdWRlcyhzY2hvb2wpKTsNCiAgICB9IGNhdGNoKGVycm9yKXtyZXR1cm4gZmFsc2U7fQ0KfQ0KDQpjb25zdCBvcmlnaW5hbEZldGNoID0gd2luZG93LmZldGNoOw0Kd2luZG93LmZldGNoID0gZnVuY3Rpb24gKHVybCwgb3B0aW9ucykgew0KICAgIGlmIChpc0Jsb2NrZWREb21haW4odXJsKSkgew0KICAgICAgICBjb25zb2xlLndhcm4oYGxhbWApOw0KICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCJsYW0iKSk7DQogICAgfQ0KICAgIHJldHVybiBvcmlnaW5hbEZldGNoLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7DQp9Ow0KDQpjb25zdCBvcmlnaW5hbE9wZW4gPSBYTUxIdHRwUmVxdWVzdC5wcm90b3R5cGUub3BlbjsNClhNTEh0dHBSZXF1ZXN0LnByb3RvdHlwZS5vcGVuID0gZnVuY3Rpb24gKG1ldGhvZCwgdXJsKSB7DQogICAgaWYgKGlzQmxvY2tlZERvbWFpbih1cmwpKSB7DQogICAgICAgIGNvbnNvbGUud2FybihgbGFtYCk7DQogICAgICAgIHJldHVybjsNCiAgICB9DQogICAgcmV0dXJuIG9yaWdpbmFsT3Blbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOw0KfTsNCg0KSFRNTENhbnZhc0VsZW1lbnQucHJvdG90eXBlLnRvRGF0YVVSTCA9IGZ1bmN0aW9uICguLi5hcmdzKSB7DQogICAgcmV0dXJuICIiOw0KfTsNCjwvc2NyaXB0Pg0KICAgIDxzY3JpcHQ+DQogICAgICAgIHRyeSB7DQogICAgICAgIGNvbnN0IHNlYXJjaCA9IG5ldyBVUkxTZWFyY2hQYXJhbXMod2luZG93LmxvY2F0aW9uLnNlYXJjaCk7DQogICAgICAgIGNvbnN0IHByaXZhY3kgPSBzZWFyY2guZ2V0KCdwcml2YWN5Jyk7DQogICAgICAgIGlmIChwcml2YWN5KSB7DQogICAgICAgICAgICBsb2FkUHJpdmFjeSgpOw0KICAgICAgICB9DQogICAgICAgIH0gY2F0Y2goZXJyb3Ipe30NCiAgICA8L3NjcmlwdD4NCiAgICA8c2NyaXB0Pg0KICAgICAgICBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5yZWdpc3Rlcihsb2NhdGlvbi5wcm90b2NvbCsiLy8iK2xvY2F0aW9uLmhvc3RuYW1lKyIvc3cuanMiKTsNCiAgICA8L3NjcmlwdD4NCjwvYm9keT4NCjwvaHRtbD4=
